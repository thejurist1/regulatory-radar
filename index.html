<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>REGULATORY RADAR — Global AI & Crypto Regulation Intelligence</title>
<meta name="description" content="Interactive 3D globe visualization of AI and cryptocurrency regulation across 20 jurisdictions worldwide.">

<!-- Open Graph for social sharing -->
<meta property="og:title" content="REGULATORY RADAR — Global Regulation Intelligence">
<meta property="og:description" content="Interactive 3D globe showing AI & crypto regulatory landscape across 20 countries.">
<meta property="og:type" content="website">

<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body, #root { width: 100%; height: 100%; overflow: hidden; }
  body { background: #020408; font-family: 'Courier New', monospace; }
</style>

<!-- ═══════════════════════════════════════════════════════════
     REGULATORY RADAR — Standalone Deployment Version
     
     DEPLOYMENT OPTIONS:
     
     1) WORDPRESS — Custom HTML Block:
        - Dashboard → Pages → Add New
        - Add "Custom HTML" block
        - Paste an iframe pointing to this file:
          <iframe src="/regulatory-radar.html" 
                  style="width:100%;height:100vh;border:none;"></iframe>
        - Upload this HTML file to your server's root or /wp-content/uploads/
     
     2) WORDPRESS — Full Page Template:
        - Upload this file as regulatory-radar.html to your server root
        - Access directly at: yourdomain.com/regulatory-radar.html
     
     3) ANY WEB SERVER:
        - Just upload this single HTML file
        - No build step, no npm, no configuration needed
        - All dependencies load from CDN
     
     SATELLITE TEXTURE UPGRADE (optional):
        - Download NASA Blue Marble: 
          https://eoimages.gsfc.nasa.gov/images/imagerecords/74000/74393/world.topo.200412.3x5400x2700.jpg
        - Save as "earth-texture.jpg" in the same directory as this HTML file
        - The globe will automatically use it instead of procedural rendering
     
     ═══════════════════════════════════════════════════════════ -->

<!-- Dependencies from CDN -->
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;


/* ═══════════════════════════════════════════════════════
   REGULATORY RADAR v14 — Natural Earth Embedded
   Real coastline data (110m resolution) embedded in code
   No external requests needed — bypasses all CSP
   ═══════════════════════════════════════════════════════ */

// Natural Earth 110m land boundaries (embedded, no fetch needed)
var LAND_GEO = {"type":"MultiPolygon","coordinates":[[[[-60,-80],[-60,-81],[-62,-81],[-64,-81],[-66,-81],[-66,-80],[-64,-80],[-62,-80],[-61,-80],[-60,-80]]],[[[-159,-79],[-161,-80],[-162,-79],[-163,-79],[-164,-79],[-163,-78],[-161,-78],[-160,-79],[-159,-79]]],[[[-45,-78],[-44,-78],[-43,-79],[-43,-80],[-45,-80],[-47,-81],[-48,-81],[-50,-81],[-53,-81],[-54,-81],[-54,-80],[-52,-80],[-51,-80],[-50,-79],[-49,-78],[-48,-78],[-47,-78],[-45,-78]]],[[[-121,-74],[-120,-74],[-119,-73],[-119,-74],[-120,-74],[-122,-74],[-123,-74],[-122,-73],[-121,-74]]],[[[-126,-73],[-124,-74],[-125,-74],[-126,-74],[-127,-73],[-126,-73]]],[[[-99,-72],[-98,-72],[-97,-72],[-96,-73],[-97,-72],[-98,-72],[-99,-72],[-101,-73],[-102,-72],[-100,-72],[-99,-72]]],[[[-68,-71],[-69,-72],[-70,-72],[-71,-73],[-72,-72],[-73,-72],[-74,-72],[-75,-72],[-74,-71],[-73,-71],[-72,-71],[-72,-70],[-71,-69],[-70,-69],[-69,-70],[-69,-71],[-68,-71]]],[[[-180,-85],[-179,-84],[-177,-84],[-176,-84],[-174,-85],[-173,-84],[-170,-84],[-169,-84],[-167,-85],[-164,-85],[-162,-85],[-158,-85],[-155,-85],[-151,-85],[-149,-86],[-146,-85],[-143,-85],[-147,-85],[-150,-84],[-151,-84],[-154,-84],[-153,-83],[-153,-82],[-155,-82],[-155,-81],[-157,-81],[-154,-81],[-152,-81],[-151,-81],[-149,-81],[-147,-81],[-146,-80],[-147,-80],[-148,-80],[-150,-79],[-152,-79],[-153,-79],[-155,-79],[-156,-79],[-157,-78],[-158,-78],[-158,-77],[-157,-77],[-155,-77],[-154,-77],[-153,-77],[-151,-77],[-150,-77],[-149,-77],[-148,-77],[-146,-76],[-146,-75],[-145,-75],[-144,-76],[-143,-75],[-142,-75],[-140,-75],[-139,-75],[-138,-75],[-136,-75],[-135,-74],[-134,-74],[-132,-74],[-131,-74],[-130,-74],[-128,-74],[-127,-74],[-125,-75],[-124,-74],[-123,-74],[-121,-75],[-120,-74],[-119,-74],[-117,-74],[-116,-74],[-115,-74],[-114,-74],[-113,-74],[-112,-75],[-111,-74],[-110,-75],[-109,-75],[-108,-75],[-106,-75],[-105,-75],[-103,-75],[-102,-75],[-101,-75],[-100,-75],[-101,-75],[-101,-74],[-103,-74],[-103,-73],[-104,-73],[-103,-73],[-102,-73],[-100,-73],[-99,-73],[-98,-73],[-98,-74],[-96,-74],[-95,-73],[-94,-73],[-92,-73],[-91,-73],[-90,-73],[-89,-73],[-88,-73],[-87,-73],[-86,-73],[-85,-73],[-84,-74],[-83,-74],[-81,-74],[-81,-73],[-80,-73],[-79,-74],[-78,-73],[-77,-74],[-76,-74],[-75,-74],[-74,-74],[-73,-73],[-72,-73],[-70,-73],[-69,-73],[-68,-73],[-67,-72],[-68,-71],[-68,-70],[-69,-70],[-68,-69],[-67,-68],[-68,-68],[-68,-67],[-67,-67],[-66,-66],[-65,-66],[-64,-65],[-63,-65],[-62,-65],[-61,-64],[-60,-64],[-59,-64],[-59,-63],[-58,-63],[-57,-64],[-58,-64],[-59,-64],[-60,-64],[-61,-64],[-61,-65],[-62,-65],[-63,-65],[-63,-66],[-62,-66],[-63,-66],[-64,-67],[-65,-67],[-66,-68],[-65,-68],[-65,-69],[-64,-69],[-63,-69],[-63,-70],[-62,-70],[-62,-71],[-61,-72],[-61,-73],[-61,-74],[-62,-74],[-63,-75],[-64,-75],[-66,-76],[-67,-76],[-68,-76],[-70,-76],[-71,-77],[-72,-77],[-74,-77],[-76,-77],[-77,-77],[-75,-77],[-74,-78],[-75,-78],[-76,-78],[-78,-78],[-78,-79],[-77,-80],[-75,-80],[-73,-80],[-71,-81],[-70,-81],[-68,-81],[-66,-81],[-63,-82],[-62,-82],[-60,-82],[-59,-83],[-58,-83],[-57,-83],[-55,-83],[-54,-82],[-52,-82],[-50,-82],[-47,-82],[-45,-82],[-43,-82],[-42,-82],[-41,-81],[-38,-81],[-36,-81],[-34,-81],[-32,-81],[-30,-81],[-29,-80],[-30,-80],[-30,-79],[-32,-79],[-34,-79],[-36,-79],[-36,-78],[-35,-78],[-34,-78],[-32,-78],[-31,-77],[-30,-77],[-29,-77],[-28,-76],[-26,-76],[-25,-76],[-24,-76],[-22,-76],[-21,-76],[-20,-76],[-19,-75],[-18,-75],[-17,-75],[-16,-74],[-15,-74],[-16,-74],[-16,-73],[-15,-73],[-14,-73],[-13,-73],[-12,-72],[-11,-72],[-10,-71],[-9,-71],[-9,-72],[-7,-72],[-7,-71],[-6,-71],[-4,-71],[-3,-71],[-2,-71],[-1,-71],[0,-72],[1,-71],[2,-71],[3,-71],[4,-71],[5,-71],[6,-70],[7,-70],[8,-70],[10,-70],[11,-71],[12,-71],[12,-70],[13,-70],[15,-70],[16,-70],[17,-70],[18,-70],[19,-70],[20,-70],[21,-70],[22,-70],[23,-71],[24,-71],[25,-70],[26,-70],[27,-70],[28,-70],[29,-70],[30,-70],[31,-70],[32,-70],[33,-69],[34,-69],[35,-69],[36,-69],[37,-69],[38,-70],[39,-70],[40,-70],[40,-69],[41,-69],[42,-69],[43,-68],[44,-68],[45,-68],[46,-68],[47,-68],[48,-67],[49,-67],[50,-67],[51,-67],[52,-66],[53,-66],[54,-66],[55,-66],[56,-66],[57,-66],[57,-67],[58,-67],[59,-67],[60,-67],[61,-68],[62,-68],[63,-68],[64,-67],[65,-68],[66,-68],[67,-68],[68,-68],[69,-68],[70,-69],[70,-70],[69,-70],[68,-70],[68,-71],[69,-71],[68,-71],[68,-72],[69,-72],[70,-72],[71,-72],[72,-72],[72,-71],[73,-71],[73,-70],[74,-70],[76,-70],[77,-70],[78,-69],[79,-68],[80,-68],[81,-68],[82,-67],[83,-67],[84,-67],[85,-67],[86,-67],[87,-67],[88,-66],[89,-67],[90,-67],[91,-67],[92,-67],[93,-67],[94,-67],[95,-67],[96,-67],[97,-67],[98,-67],[99,-67],[100,-67],[101,-67],[102,-66],[103,-66],[104,-66],[105,-66],[106,-67],[107,-67],[108,-67],[109,-67],[110,-67],[111,-66],[112,-66],[113,-66],[114,-66],[115,-66],[116,-67],[117,-67],[119,-67],[120,-67],[121,-67],[122,-67],[123,-66],[124,-67],[125,-67],[126,-67],[127,-67],[128,-67],[129,-67],[130,-67],[131,-66],[132,-66],[133,-66],[134,-66],[135,-66],[135,-65],[136,-66],[137,-67],[139,-67],[140,-67],[141,-67],[142,-67],[143,-67],[144,-67],[145,-67],[146,-67],[146,-68],[147,-68],[148,-68],[149,-68],[150,-69],[151,-69],[153,-69],[154,-69],[155,-69],[156,-69],[157,-69],[158,-69],[159,-70],[160,-70],[161,-70],[162,-71],[163,-71],[164,-71],[165,-71],[166,-71],[167,-71],[168,-71],[169,-71],[171,-71],[171,-72],[170,-73],[169,-74],[168,-74],[167,-74],[166,-74],[166,-75],[165,-75],[164,-75],[164,-76],[163,-77],[164,-77],[164,-78],[165,-78],[167,-78],[167,-79],[165,-79],[164,-79],[162,-79],[161,-80],[160,-81],[161,-81],[162,-82],[164,-82],[165,-83],[167,-83],[169,-83],[169,-84],[172,-84],[173,-84],[176,-84],[178,-84],[-180,-85]]],[[[-68,-54],[-66,-54],[-65,-55],[-66,-55],[-67,-55],[-68,-56],[-69,-55],[-70,-55],[-71,-55],[-72,-54],[-73,-54],[-75,-53],[-74,-53],[-72,-54],[-71,-54],[-70,-53],[-69,-53],[-68,-53],[-68,-54]]],[[[-59,-51],[-58,-52],[-59,-52],[-60,-52],[-61,-52],[-60,-51],[-59,-52],[-59,-51]]],[[[70,-50],[69,-50],[69,-49],[70,-49],[71,-49],[70,-50]]],[[[145,-41],[146,-41],[147,-41],[148,-41],[148,-42],[148,-43],[147,-44],[146,-44],[145,-43],[145,-42],[145,-41]]],[[[173,-41],[174,-41],[174,-42],[173,-43],[173,-44],[172,-44],[171,-44],[171,-45],[171,-46],[170,-46],[169,-47],[168,-47],[168,-46],[167,-46],[167,-45],[168,-44],[169,-44],[170,-44],[171,-43],[172,-42],[172,-41],[173,-40],[173,-41]]],[[[175,-36],[175,-37],[176,-37],[176,-38],[177,-38],[178,-38],[179,-38],[178,-39],[177,-39],[177,-40],[177,-41],[176,-41],[175,-42],[175,-41],[175,-40],[174,-40],[174,-39],[175,-39],[175,-38],[175,-37],[174,-37],[174,-36],[173,-35],[173,-34],[174,-35],[175,-36]]],[[[167,-22],[166,-22],[165,-22],[165,-21],[164,-20],[165,-20],[165,-21],[166,-21],[167,-22]]],[[[178,-17],[179,-18],[178,-18],[177,-18],[178,-17],[178,-18],[178,-17]]],[[[-180,-17],[179,-17],[179,-16],[-180,-16],[-180,-17]]],[[[168,-16],[168,-17],[167,-16],[168,-16]]],[[[50,-14],[50,-15],[50,-16],[50,-15],[50,-16],[50,-17],[49,-17],[49,-18],[49,-19],[49,-20],[48,-22],[48,-24],[47,-25],[46,-25],[45,-26],[45,-25],[44,-25],[44,-24],[43,-23],[43,-22],[43,-21],[44,-21],[44,-20],[44,-19],[44,-18],[44,-17],[44,-16],[45,-16],[46,-16],[47,-15],[48,-15],[48,-14],[49,-13],[49,-12],[50,-12],[50,-13],[50,-14]]],[[[144,-14],[144,-15],[145,-14],[145,-15],[145,-16],[146,-17],[146,-18],[146,-19],[147,-19],[148,-20],[149,-20],[149,-21],[150,-22],[150,-23],[151,-22],[151,-23],[152,-24],[153,-25],[153,-26],[153,-27],[154,-28],[154,-29],[153,-29],[153,-30],[153,-31],[153,-32],[152,-33],[151,-34],[151,-35],[150,-36],[150,-37],[149,-38],[148,-38],[147,-38],[147,-39],[146,-39],[145,-39],[145,-38],[144,-38],[144,-39],[143,-39],[142,-38],[141,-38],[140,-37],[140,-36],[139,-36],[138,-36],[138,-35],[138,-34],[138,-35],[137,-35],[138,-34],[138,-33],[137,-34],[136,-34],[136,-35],[135,-34],[135,-33],[134,-33],[133,-32],[132,-32],[131,-31],[130,-32],[128,-32],[127,-32],[126,-32],[125,-33],[124,-33],[124,-34],[123,-34],[122,-34],[121,-34],[120,-34],[119,-35],[119,-34],[119,-35],[118,-35],[117,-35],[116,-34],[115,-34],[116,-33],[116,-32],[115,-31],[115,-30],[115,-29],[114,-28],[114,-27],[113,-27],[113,-26],[114,-27],[113,-26],[114,-26],[114,-25],[113,-24],[114,-24],[114,-23],[114,-22],[114,-23],[115,-22],[115,-21],[116,-21],[117,-21],[118,-20],[119,-20],[120,-20],[121,-20],[121,-19],[122,-19],[122,-18],[122,-17],[123,-16],[123,-17],[124,-17],[124,-16],[125,-15],[126,-15],[126,-14],[127,-14],[128,-14],[128,-15],[129,-15],[130,-15],[129,-14],[130,-14],[130,-13],[131,-13],[131,-12],[132,-12],[133,-12],[132,-11],[133,-11],[134,-12],[135,-12],[136,-12],[137,-12],[137,-13],[136,-13],[136,-14],[135,-15],[136,-16],[137,-16],[138,-16],[138,-17],[139,-17],[140,-18],[141,-17],[141,-16],[142,-15],[142,-14],[142,-13],[142,-12],[142,-11],[143,-11],[143,-12],[144,-13],[144,-14]]],[[[162,-10],[162,-11],[161,-10],[162,-10]]],[[[121,-10],[120,-10],[119,-10],[120,-9],[120,-10],[121,-10]]],[[[161,-10],[160,-10],[160,-9],[161,-10]]],[[[162,-10],[161,-9],[161,-8],[161,-9],[162,-10]]],[[[124,-10],[123,-10],[124,-10],[124,-9],[125,-9],[126,-8],[127,-8],[127,-9],[126,-9],[125,-9],[124,-10]]],[[[118,-8],[119,-8],[119,-9],[118,-9],[117,-9],[117,-8],[118,-8]]],[[[123,-8],[123,-9],[121,-9],[120,-9],[120,-8],[121,-8],[121,-9],[122,-8],[123,-8]]],[[[160,-8],[160,-9],[159,-8],[158,-7],[159,-8],[160,-8]]],[[[158,-7],[157,-7],[156,-7],[157,-7],[158,-7]]],[[[109,-7],[111,-7],[111,-6],[113,-7],[113,-8],[114,-8],[116,-8],[115,-9],[113,-8],[112,-8],[111,-8],[109,-8],[108,-8],[106,-7],[105,-7],[106,-6],[107,-6],[108,-6],[109,-7]]],[[[135,-6],[134,-7],[134,-6],[134,-5],[135,-6]]],[[[156,-7],[155,-7],[155,-6],[155,-5],[155,-6],[156,-6],[156,-7]]],[[[152,-5],[151,-6],[150,-6],[149,-6],[148,-6],[148,-5],[149,-6],[150,-6],[150,-5],[150,-6],[151,-5],[152,-5],[152,-4],[152,-5]]],[[[127,-3],[127,-4],[126,-4],[126,-3],[127,-3]]],[[[130,-3],[131,-4],[130,-3],[129,-3],[128,-3],[129,-3],[130,-3]]],[[[153,-4],[153,-5],[153,-4],[152,-4],[152,-3],[151,-3],[151,-2],[151,-3],[152,-3],[153,-4]]],[[[134,-1],[134,-3],[135,-3],[136,-2],[137,-2],[138,-2],[139,-2],[140,-2],[141,-3],[143,-3],[145,-4],[146,-5],[148,-6],[148,-7],[147,-7],[148,-8],[149,-9],[149,-10],[150,-10],[151,-10],[151,-11],[150,-11],[150,-10],[149,-10],[148,-10],[147,-9],[146,-8],[145,-8],[144,-8],[143,-8],[143,-9],[142,-9],[141,-9],[140,-8],[139,-8],[138,-8],[139,-7],[138,-6],[138,-5],[136,-5],[135,-4],[134,-4],[133,-4],[133,-3],[132,-3],[133,-2],[134,-2],[132,-2],[131,-1],[132,-1],[132,0],[134,-1]]],[[[125,1],[124,0],[123,0],[121,0],[120,0],[120,-1],[121,-1],[123,-1],[122,-2],[122,-3],[122,-4],[123,-5],[123,-6],[122,-5],[123,-4],[122,-5],[121,-5],[122,-4],[121,-4],[121,-3],[120,-3],[120,-4],[120,-6],[119,-5],[120,-4],[119,-3],[119,-2],[119,-1],[120,0],[120,1],[121,1],[122,1],[123,1],[124,1],[125,2],[125,1]]],[[[129,1],[129,0],[128,0],[128,-1],[128,0],[127,1],[128,2],[129,2],[129,1]]],[[[106,-6],[105,-6],[104,-5],[103,-4],[102,-4],[101,-3],[101,-2],[100,-1],[99,0],[99,1],[99,2],[98,2],[97,3],[96,4],[95,5],[96,5],[97,5],[98,4],[99,4],[100,3],[101,2],[102,2],[102,1],[103,1],[104,0],[103,-1],[104,-1],[105,-2],[106,-2],[106,-3],[106,-4],[106,-6]]],[[[118,2],[119,1],[118,1],[117,0],[118,-1],[117,-1],[117,-2],[116,-4],[115,-4],[114,-3],[113,-3],[112,-3],[111,-3],[110,-3],[110,-2],[110,-1],[109,0],[109,1],[110,2],[111,2],[111,3],[112,3],[113,3],[114,4],[114,5],[115,5],[116,6],[117,7],[118,6],[119,5],[118,5],[119,4],[118,4],[117,3],[118,2]]],[[[126,8],[127,7],[126,6],[126,7],[125,7],[126,6],[125,6],[124,6],[124,7],[124,8],[123,7],[122,7],[122,8],[123,8],[123,9],[124,8],[125,9],[125,10],[126,9],[126,8]]],[[[81,6],[80,6],[80,7],[80,8],[80,10],[81,9],[82,8],[82,6],[81,6]]],[[[-61,10],[-62,10],[-62,11],[-61,11],[-61,10]]],[[[124,10],[123,9],[122,10],[123,10],[123,11],[123,10],[124,11],[124,10]]],[[[119,9],[117,8],[118,9],[118,10],[119,10],[120,11],[119,10],[119,9]]],[[[122,12],[123,12],[123,11],[122,10],[122,11],[122,12]]],[[[126,12],[126,11],[125,11],[125,10],[125,11],[124,11],[125,11],[125,12],[124,13],[125,13],[126,12]]],[[[122,13],[121,12],[121,13],[120,13],[121,13],[122,13]]],[[[121,19],[122,18],[123,17],[122,16],[122,15],[122,14],[123,14],[124,14],[124,13],[123,13],[123,14],[123,13],[122,14],[121,14],[121,15],[121,14],[120,15],[120,16],[120,18],[121,19]]],[[[-66,18],[-67,18],[-67,19],[-66,19],[-66,18]]],[[[-77,18],[-78,18],[-78,19],[-78,18],[-77,18],[-76,18],[-77,18]]],[[[-73,20],[-72,20],[-71,20],[-70,20],[-70,19],[-69,19],[-68,19],[-69,18],[-70,18],[-71,18],[-72,18],[-73,18],[-74,18],[-74,19],[-73,19],[-73,18],[-72,19],[-73,19],[-73,20]]],[[[110,19],[109,18],[109,19],[109,20],[110,20],[111,20],[111,19],[110,19]]],[[[-156,19],[-156,20],[-155,20],[-155,19],[-156,19]]],[[[-80,23],[-79,22],[-78,23],[-78,22],[-77,22],[-77,21],[-76,21],[-75,21],[-74,20],[-75,20],[-76,20],[-78,20],[-77,20],[-77,21],[-78,21],[-79,22],[-80,22],[-81,22],[-82,22],[-82,23],[-83,23],[-83,22],[-84,22],[-85,22],[-84,22],[-84,23],[-83,23],[-82,23],[-81,23],[-80,23]]],[[[121,23],[121,22],[120,23],[120,24],[121,25],[122,25],[122,24],[121,23]]],[[[-78,27],[-79,26],[-79,27],[-78,27]]],[[[-77,27],[-77,26],[-77,27],[-78,27],[-77,27]]],[[[135,34],[134,33],[134,34],[133,33],[132,33],[133,34],[134,34],[135,34]]],[[[35,36],[34,35],[33,35],[32,35],[33,35],[34,35],[35,36]]],[[[24,36],[24,35],[25,35],[26,35],[25,35],[24,35],[24,36]]],[[[16,38],[15,37],[14,37],[12,38],[13,38],[14,38],[15,38],[16,38]]],[[[9,41],[10,41],[10,39],[9,39],[8,39],[8,40],[8,41],[9,41]]],[[[141,37],[141,36],[140,35],[139,35],[137,35],[136,33],[135,34],[135,35],[133,34],[132,34],[131,34],[132,33],[131,31],[130,31],[130,32],[130,33],[129,33],[130,34],[131,34],[132,35],[133,35],[135,36],[136,36],[137,37],[139,38],[140,39],[140,41],[141,41],[142,40],[142,39],[141,38],[141,37]]],[[[10,42],[9,41],[9,42],[9,43],[10,42]]],[[[144,44],[145,44],[146,43],[144,43],[143,42],[142,43],[141,42],[140,42],[140,43],[141,43],[142,45],[142,46],[143,45],[144,44]]],[[[-64,47],[-63,46],[-62,46],[-63,46],[-64,46],[-64,47]]],[[[-62,49],[-64,49],[-65,50],[-64,50],[-63,50],[-62,49]]],[[[-124,49],[-124,48],[-126,49],[-127,50],[-128,50],[-128,51],[-127,51],[-127,50],[-126,50],[-125,50],[-125,49],[-124,49]]],[[[-56,51],[-57,50],[-56,50],[-55,50],[-56,50],[-55,49],[-54,50],[-53,49],[-54,49],[-53,49],[-53,48],[-53,47],[-54,47],[-54,48],[-55,47],[-56,47],[-55,47],[-56,48],[-57,48],[-59,48],[-59,49],[-58,49],[-57,51],[-56,52],[-55,52],[-56,51]]],[[[-133,54],[-132,54],[-132,53],[-131,52],[-132,52],[-132,53],[-133,53],[-133,54]]],[[[144,51],[145,49],[143,49],[143,48],[144,47],[144,46],[143,47],[142,46],[142,47],[142,48],[142,49],[142,50],[142,51],[142,52],[142,53],[143,54],[142,54],[143,54],[143,53],[143,52],[144,51]]],[[[-7,52],[-9,52],[-10,52],[-9,53],[-10,54],[-8,55],[-7,55],[-6,55],[-6,54],[-6,53],[-7,52]]],[[[13,56],[12,55],[11,55],[11,56],[12,56],[13,56]]],[[[-153,57],[-154,57],[-155,57],[-154,58],[-153,58],[-152,58],[-153,57]]],[[[-3,59],[-4,58],[-3,58],[-2,58],[-2,57],[-3,56],[-2,56],[-1,55],[0,54],[0,53],[2,53],[2,52],[1,52],[1,51],[-1,51],[-2,50],[-3,51],[-4,50],[-5,50],[-6,50],[-4,51],[-3,51],[-5,52],[-4,52],[-5,53],[-3,53],[-3,54],[-4,55],[-5,55],[-5,56],[-6,55],[-6,56],[-6,57],[-6,58],[-5,59],[-4,59],[-3,59]]],[[[-82,63],[-83,62],[-84,62],[-83,63],[-82,63]]],[[[-172,64],[-171,64],[-170,64],[-170,63],[-169,63],[-170,63],[-171,63],[-172,63],[-172,64]]],[[[-85,66],[-85,65],[-84,65],[-83,65],[-82,64],[-81,64],[-80,64],[-81,63],[-83,64],[-84,64],[-86,63],[-86,64],[-87,64],[-86,64],[-86,65],[-86,66],[-85,66]]],[[[-15,66],[-14,65],[-15,64],[-18,64],[-19,63],[-20,64],[-23,64],[-22,64],[-24,65],[-22,65],[-24,66],[-22,66],[-21,66],[-19,66],[-18,66],[-16,67],[-15,66]]],[[[-76,67],[-77,67],[-77,68],[-76,68],[-75,68],[-75,67],[-76,67]]],[[[-180,69],[-178,68],[-175,67],[-174,66],[-175,67],[-172,67],[-170,66],[-171,66],[-173,65],[-173,64],[-174,64],[-175,65],[-176,65],[-177,66],[-178,65],[-179,66],[-180,66],[-179,65],[-180,65],[180,65],[179,65],[177,65],[178,64],[179,63],[179,62],[177,63],[175,62],[174,62],[172,61],[171,60],[170,60],[169,61],[166,60],[165,60],[164,60],[163,59],[162,58],[163,58],[163,56],[162,56],[162,55],[160,54],[160,53],[159,53],[158,52],[157,51],[156,52],[156,53],[155,55],[156,57],[157,57],[157,58],[158,58],[160,59],[162,60],[164,61],[164,63],[163,62],[160,61],[159,62],[157,61],[154,60],[155,59],[153,59],[151,59],[151,60],[150,60],[149,59],[145,59],[142,59],[139,57],[135,55],[137,55],[137,54],[138,54],[139,54],[140,54],[141,53],[141,52],[141,51],[141,50],[140,48],[139,47],[138,46],[137,45],[136,44],[135,43],[134,43],[133,43],[132,43],[131,43],[131,42],[130,42],[130,41],[129,41],[129,40],[128,40],[128,39],[127,39],[128,39],[129,37],[129,36],[129,35],[128,35],[127,34],[126,34],[126,35],[127,36],[126,37],[127,37],[126,38],[125,38],[125,39],[125,40],[124,40],[123,40],[122,39],[121,39],[122,39],[121,40],[122,40],[122,41],[121,41],[120,40],[119,39],[118,39],[118,38],[119,38],[119,37],[120,37],[121,38],[122,37],[123,37],[121,37],[121,36],[120,36],[119,35],[120,34],[121,33],[121,32],[122,32],[122,31],[121,31],[122,30],[122,29],[122,28],[121,28],[120,27],[120,26],[119,25],[117,24],[116,23],[115,23],[114,22],[114,23],[113,22],[112,22],[111,21],[110,20],[110,21],[109,22],[108,22],[107,21],[106,20],[106,19],[106,18],[107,17],[108,16],[109,15],[109,13],[109,12],[108,11],[107,10],[106,10],[105,9],[105,10],[104,10],[103,11],[103,12],[102,13],[101,13],[100,13],[100,12],[99,11],[99,10],[99,9],[100,9],[100,8],[100,7],[101,7],[102,7],[102,6],[103,6],[103,5],[103,4],[103,3],[104,3],[104,2],[104,1],[103,2],[101,3],[101,4],[101,5],[100,5],[100,6],[100,7],[99,8],[98,8],[98,9],[99,10],[98,11],[99,11],[98,12],[99,13],[98,14],[98,15],[98,16],[97,17],[97,16],[95,16],[94,16],[95,17],[94,18],[94,19],[94,20],[93,20],[92,21],[92,22],[91,23],[90,23],[91,22],[90,22],[89,22],[88,22],[87,21],[86,20],[85,19],[84,18],[83,18],[82,17],[82,16],[81,16],[80,16],[80,15],[80,14],[80,13],[80,12],[80,10],[79,10],[79,9],[78,9],[78,8],[77,9],[76,10],[76,11],[75,12],[75,13],[75,14],[74,15],[74,16],[73,18],[73,19],[73,20],[73,21],[71,21],[70,21],[69,22],[70,22],[69,23],[68,24],[67,24],[67,25],[66,25],[65,25],[63,25],[61,25],[60,25],[59,26],[57,26],[57,27],[56,27],[55,26],[53,27],[52,28],[51,29],[50,30],[49,30],[48,30],[48,29],[49,28],[49,27],[50,27],[50,26],[51,25],[51,26],[52,26],[52,25],[51,25],[52,24],[53,24],[54,24],[55,25],[56,26],[56,25],[57,24],[58,24],[59,24],[59,23],[60,23],[60,22],[59,22],[59,21],[58,20],[58,19],[57,19],[57,18],[56,18],[55,18],[55,17],[54,17],[53,17],[52,16],[51,15],[50,15],[49,14],[48,14],[47,14],[47,13],[46,13],[45,13],[44,13],[43,13],[43,14],[43,15],[43,16],[43,17],[42,17],[42,18],[41,19],[40,20],[39,21],[39,22],[39,23],[38,24],[37,24],[37,25],[37,26],[36,27],[35,28],[35,29],[35,30],[35,29],[34,28],[33,28],[32,30],[33,29],[33,28],[34,26],[35,25],[36,24],[35,24],[36,23],[37,22],[37,21],[37,20],[37,19],[38,18],[39,17],[39,16],[40,15],[41,14],[42,14],[42,13],[43,13],[43,12],[43,11],[44,11],[44,10],[45,10],[46,11],[47,11],[48,11],[49,11],[50,12],[51,12],[51,11],[51,10],[51,9],[50,8],[49,7],[49,5],[48,4],[47,3],[46,2],[44,1],[43,0],[42,-1],[42,-2],[41,-2],[40,-3],[40,-4],[39,-5],[39,-6],[39,-7],[39,-8],[40,-9],[40,-10],[40,-11],[40,-12],[41,-13],[41,-14],[41,-15],[40,-15],[40,-16],[39,-17],[37,-18],[36,-19],[35,-20],[35,-21],[35,-22],[36,-22],[36,-23],[35,-24],[36,-24],[35,-24],[34,-25],[33,-25],[33,-26],[33,-27],[32,-28],[32,-29],[31,-29],[31,-30],[30,-31],[29,-32],[28,-33],[27,-33],[26,-34],[25,-34],[24,-34],[23,-34],[22,-34],[21,-34],[20,-35],[19,-34],[18,-34],[18,-33],[18,-32],[18,-31],[17,-30],[16,-29],[16,-28],[15,-27],[15,-26],[15,-25],[14,-24],[14,-23],[14,-22],[13,-21],[13,-20],[13,-19],[12,-18],[12,-17],[12,-16],[12,-15],[12,-14],[13,-14],[13,-13],[13,-12],[14,-12],[14,-11],[13,-10],[13,-9],[13,-8],[13,-7],[12,-6],[12,-5],[11,-4],[10,-3],[9,-2],[9,-1],[9,0],[9,1],[10,2],[10,3],[9,4],[8,4],[9,5],[7,4],[6,4],[5,5],[5,6],[4,6],[3,6],[2,6],[1,6],[-1,5],[-2,5],[-3,5],[-4,5],[-5,5],[-6,5],[-7,5],[-8,4],[-9,5],[-10,6],[-11,6],[-11,7],[-12,7],[-13,8],[-13,9],[-14,9],[-14,10],[-15,10],[-15,11],[-16,11],[-16,12],[-17,12],[-17,13],[-17,14],[-18,15],[-17,15],[-17,16],[-16,16],[-17,17],[-16,17],[-16,18],[-16,19],[-16,20],[-17,21],[-17,22],[-16,23],[-16,24],[-15,24],[-15,25],[-15,26],[-14,26],[-14,27],[-13,28],[-12,28],[-11,29],[-10,29],[-10,30],[-10,31],[-9,32],[-9,33],[-8,34],[-7,34],[-6,35],[-6,36],[-5,36],[-5,35],[-4,35],[-3,35],[-2,35],[-1,36],[0,36],[1,36],[1,37],[3,37],[5,37],[6,37],[7,37],[8,37],[10,37],[11,37],[11,36],[11,35],[10,34],[11,34],[11,33],[13,33],[14,33],[15,32],[16,31],[17,31],[18,31],[19,30],[20,31],[20,32],[21,33],[22,33],[23,33],[23,32],[24,32],[25,32],[26,32],[27,31],[28,31],[29,31],[30,31],[31,32],[32,31],[33,31],[34,31],[35,32],[34,32],[35,32],[35,33],[35,34],[36,35],[36,36],[36,37],[35,37],[34,36],[33,36],[32,37],[31,37],[30,36],[29,37],[28,37],[27,38],[26,38],[27,39],[26,39],[27,40],[29,40],[29,41],[31,41],[32,42],[34,42],[35,42],[37,41],[38,41],[40,41],[42,42],[41,43],[40,43],[39,44],[38,45],[37,45],[38,46],[38,47],[39,47],[38,47],[37,47],[36,47],[35,46],[36,45],[37,45],[36,45],[35,45],[34,44],[33,45],[34,45],[32,45],[33,46],[34,46],[33,46],[32,46],[32,47],[31,47],[30,46],[30,45],[29,45],[29,44],[28,43],[28,42],[29,41],[28,41],[27,41],[26,40],[26,41],[25,41],[24,41],[24,40],[23,40],[23,39],[24,39],[24,38],[23,38],[23,37],[23,36],[22,36],[22,37],[21,38],[21,39],[20,39],[20,40],[19,40],[19,41],[20,42],[19,42],[18,42],[18,43],[17,43],[16,44],[15,44],[15,45],[14,45],[14,46],[13,46],[12,45],[13,44],[14,44],[14,43],[15,42],[16,42],[17,41],[18,41],[18,40],[17,40],[16,40],[17,39],[16,38],[16,39],[16,40],[15,40],[15,41],[14,41],[13,41],[12,42],[11,42],[11,43],[10,44],[9,44],[8,44],[7,44],[7,43],[5,43],[3,43],[3,42],[2,41],[1,41],[0,40],[0,39],[0,38],[-1,38],[-1,37],[-2,37],[-3,37],[-4,37],[-5,36],[-6,36],[-7,37],[-8,37],[-9,37],[-9,38],[-10,39],[-9,39],[-9,40],[-9,41],[-9,42],[-9,43],[-8,44],[-7,44],[-5,44],[-4,43],[-2,43],[-1,44],[-1,46],[-2,47],[-3,48],[-4,48],[-5,49],[-3,49],[-2,49],[-2,50],[-1,49],[1,50],[2,51],[3,51],[4,52],[5,53],[6,54],[7,53],[7,54],[8,54],[9,54],[9,55],[8,56],[8,57],[9,57],[10,57],[11,58],[11,57],[10,57],[11,56],[10,56],[10,55],[11,54],[12,54],[13,54],[14,54],[15,54],[16,55],[18,55],[19,55],[19,54],[20,54],[20,55],[21,55],[21,56],[21,57],[22,57],[23,58],[23,57],[24,57],[24,58],[23,59],[25,59],[26,60],[27,59],[28,59],[29,60],[28,61],[26,60],[24,60],[23,60],[22,60],[21,61],[22,62],[21,63],[22,63],[22,64],[25,65],[25,66],[24,66],[22,66],[21,65],[21,64],[20,64],[18,63],[17,61],[18,61],[19,60],[18,59],[17,59],[16,57],[16,56],[15,56],[14,55],[13,55],[13,56],[12,57],[11,59],[10,59],[8,58],[7,58],[6,59],[5,60],[5,62],[6,63],[9,63],[11,64],[12,66],[15,68],[16,69],[19,70],[21,70],[23,70],[25,71],[26,71],[28,71],[31,70],[30,70],[31,70],[32,70],[34,69],[37,69],[40,68],[41,67],[40,66],[38,66],[34,67],[33,67],[35,66],[35,64],[36,64],[37,64],[37,65],[40,65],[42,66],[43,66],[44,66],[45,67],[44,67],[44,68],[43,69],[46,68],[47,68],[46,68],[46,67],[48,67],[48,68],[50,68],[54,69],[53,68],[55,68],[57,68],[59,69],[60,68],[61,69],[60,70],[61,70],[64,70],[65,69],[69,68],[69,69],[68,69],[67,69],[67,70],[67,71],[69,72],[69,73],[70,73],[73,73],[73,72],[72,71],[73,70],[73,69],[74,68],[73,68],[71,66],[72,66],[73,67],[74,67],[75,68],[74,68],[75,69],[74,69],[74,70],[74,71],[73,71],[75,72],[75,73],[76,72],[75,71],[76,71],[76,72],[78,72],[80,72],[81,72],[81,73],[81,74],[82,74],[85,74],[87,74],[86,74],[87,75],[88,75],[90,76],[93,76],[96,76],[97,76],[99,76],[101,76],[101,77],[102,77],[104,78],[106,77],[105,77],[107,77],[107,76],[108,77],[111,77],[113,76],[114,76],[114,75],[113,75],[110,74],[109,74],[111,74],[112,74],[113,74],[114,73],[114,74],[116,74],[119,74],[119,73],[123,73],[123,74],[125,74],[127,74],[129,73],[129,72],[128,72],[130,71],[131,71],[132,72],[134,71],[136,72],[137,71],[138,72],[140,71],[139,72],[140,73],[150,72],[153,71],[157,71],[159,71],[160,70],[161,69],[162,70],[164,70],[166,69],[168,70],[170,69],[171,69],[170,70],[174,70],[176,70],[179,69],[-180,69]],[[49,41],[50,41],[50,40],[49,39],[49,38],[50,37],[51,37],[52,37],[54,37],[54,38],[54,39],[53,39],[53,40],[53,41],[54,41],[55,41],[54,42],[53,42],[53,41],[53,42],[52,42],[53,42],[53,43],[51,43],[51,44],[50,44],[50,45],[51,45],[52,45],[53,45],[53,46],[53,47],[52,47],[51,47],[50,47],[49,46],[48,46],[47,45],[48,44],[47,43],[49,42],[49,41]]],[[[-96,69],[-98,69],[-100,69],[-99,70],[-98,70],[-97,70],[-96,69]]],[[[-180,72],[180,71],[179,71],[-180,72]]],[[[-180,72],[-179,72],[-178,71],[-179,71],[-180,71],[-180,72]]],[[[-91,69],[-91,68],[-89,69],[-88,69],[-88,68],[-87,67],[-86,68],[-86,69],[-86,70],[-84,70],[-83,70],[-81,69],[-82,68],[-81,68],[-81,67],[-83,66],[-85,66],[-86,67],[-86,66],[-87,65],[-88,64],[-90,64],[-91,64],[-91,63],[-92,63],[-93,62],[-94,61],[-95,60],[-95,59],[-93,59],[-93,58],[-92,57],[-91,57],[-89,57],[-88,56],[-87,56],[-86,56],[-85,55],[-83,55],[-82,55],[-82,54],[-82,53],[-81,52],[-80,51],[-79,52],[-79,53],[-79,54],[-80,55],[-78,55],[-77,56],[-77,57],[-77,58],[-79,59],[-77,60],[-78,61],[-78,62],[-77,63],[-76,62],[-75,62],[-74,62],[-73,62],[-72,62],[-71,61],[-70,61],[-70,60],[-69,59],[-68,59],[-68,58],[-66,59],[-65,60],[-64,59],[-63,58],[-61,57],[-62,56],[-60,56],[-60,55],[-58,55],[-57,55],[-57,54],[-56,54],[-56,53],[-56,52],[-57,51],[-59,51],[-60,50],[-62,50],[-64,50],[-65,50],[-66,50],[-67,50],[-69,49],[-70,48],[-71,47],[-70,47],[-69,48],[-67,49],[-65,49],[-64,49],[-65,48],[-65,47],[-64,46],[-63,46],[-62,46],[-61,47],[-60,46],[-61,45],[-63,45],[-64,44],[-65,44],[-66,44],[-64,45],[-66,45],[-67,45],[-68,44],[-69,44],[-70,44],[-71,43],[-71,42],[-70,42],[-71,41],[-72,41],[-73,41],[-74,41],[-72,41],[-73,41],[-74,41],[-74,40],[-75,39],[-76,39],[-75,39],[-75,38],[-76,37],[-76,38],[-76,39],[-77,39],[-76,38],[-77,38],[-76,38],[-76,37],[-76,36],[-76,35],[-77,35],[-78,34],[-79,34],[-79,33],[-80,33],[-81,32],[-81,31],[-81,30],[-81,29],[-81,28],[-80,27],[-80,26],[-80,25],[-81,25],[-81,26],[-82,26],[-82,27],[-83,27],[-83,28],[-83,29],[-84,30],[-85,30],[-86,30],[-88,30],[-89,30],[-90,30],[-89,30],[-89,29],[-90,29],[-91,29],[-92,30],[-93,30],[-94,30],[-95,29],[-96,29],[-97,28],[-97,27],[-97,26],[-98,25],[-98,24],[-98,23],[-98,22],[-97,21],[-97,20],[-96,19],[-95,19],[-94,18],[-93,19],[-92,19],[-91,19],[-91,20],[-90,21],[-89,21],[-88,21],[-87,22],[-87,21],[-87,20],[-88,20],[-87,19],[-88,19],[-88,18],[-88,19],[-88,18],[-88,17],[-89,16],[-88,16],[-87,16],[-86,16],[-85,16],[-84,16],[-84,15],[-83,15],[-83,14],[-84,14],[-84,13],[-83,13],[-83,12],[-84,12],[-84,11],[-83,10],[-82,9],[-81,9],[-80,9],[-80,10],[-79,10],[-79,9],[-78,9],[-77,9],[-76,9],[-76,10],[-75,11],[-74,11],[-73,11],[-73,12],[-72,12],[-71,12],[-72,11],[-72,10],[-72,9],[-71,9],[-71,10],[-71,11],[-70,11],[-70,12],[-70,11],[-69,11],[-68,11],[-67,11],[-66,11],[-66,10],[-65,10],[-64,10],[-64,11],[-63,11],[-62,11],[-63,10],[-62,10],[-61,9],[-60,9],[-60,8],[-59,8],[-58,7],[-58,6],[-57,6],[-56,6],[-55,6],[-54,6],[-53,5],[-52,5],[-52,4],[-51,4],[-51,2],[-50,2],[-50,1],[-51,0],[-50,0],[-49,0],[-49,-1],[-48,-1],[-47,-1],[-45,-2],[-44,-2],[-45,-3],[-43,-2],[-41,-3],[-40,-3],[-39,-4],[-37,-5],[-36,-5],[-35,-5],[-35,-7],[-35,-9],[-36,-10],[-37,-11],[-38,-12],[-38,-13],[-39,-13],[-39,-14],[-39,-16],[-39,-17],[-39,-18],[-40,-18],[-40,-20],[-41,-21],[-41,-22],[-42,-22],[-42,-23],[-43,-23],[-45,-23],[-45,-24],[-46,-24],[-48,-25],[-48,-26],[-49,-27],[-48,-27],[-49,-28],[-49,-29],[-50,-29],[-51,-31],[-52,-32],[-53,-33],[-53,-34],[-54,-34],[-55,-35],[-56,-35],[-57,-34],[-58,-34],[-57,-35],[-57,-36],[-57,-37],[-58,-38],[-59,-39],[-61,-39],[-62,-39],[-62,-40],[-62,-41],[-63,-41],[-64,-41],[-65,-41],[-65,-42],[-64,-42],[-63,-43],[-64,-43],[-65,-43],[-65,-45],[-66,-45],[-67,-45],[-67,-46],[-68,-46],[-67,-47],[-66,-47],[-66,-48],[-67,-49],[-68,-50],[-69,-50],[-69,-51],[-69,-52],[-68,-52],[-69,-52],[-70,-53],[-71,-53],[-71,-54],[-73,-54],[-74,-53],[-75,-52],[-75,-51],[-75,-50],[-76,-49],[-75,-48],[-74,-47],[-76,-47],[-75,-46],[-74,-44],[-73,-44],[-73,-42],[-74,-43],[-74,-42],[-74,-40],[-73,-39],[-74,-38],[-74,-37],[-73,-37],[-73,-36],[-72,-34],[-71,-32],[-72,-31],[-71,-30],[-71,-29],[-71,-28],[-71,-26],[-70,-24],[-70,-21],[-70,-20],[-70,-18],[-71,-18],[-71,-17],[-73,-16],[-75,-15],[-76,-15],[-76,-14],[-77,-12],[-78,-10],[-79,-8],[-80,-7],[-81,-7],[-81,-6],[-81,-5],[-81,-4],[-80,-3],[-80,-2],[-80,-3],[-81,-2],[-81,-1],[-80,0],[-80,1],[-79,1],[-79,2],[-78,3],[-77,4],[-77,5],[-78,6],[-77,6],[-77,7],[-78,7],[-78,8],[-79,9],[-80,9],[-80,8],[-80,7],[-81,7],[-81,8],[-82,8],[-83,8],[-84,8],[-84,9],[-85,10],[-86,10],[-86,11],[-87,12],[-88,13],[-87,13],[-88,13],[-89,13],[-90,14],[-91,14],[-92,14],[-92,15],[-93,16],[-94,16],[-95,16],[-96,16],[-97,16],[-98,16],[-99,17],[-100,17],[-101,17],[-102,18],[-103,18],[-104,19],[-105,19],[-105,20],[-106,20],[-105,21],[-106,21],[-105,21],[-106,22],[-106,23],[-107,24],[-108,25],[-109,26],[-110,27],[-111,28],[-112,28],[-112,29],[-113,30],[-113,31],[-114,32],[-115,32],[-115,31],[-115,30],[-114,30],[-114,29],[-113,29],[-113,28],[-112,28],[-112,27],[-111,26],[-111,25],[-111,24],[-110,24],[-109,23],[-110,23],[-111,24],[-112,24],[-112,25],[-112,26],[-113,26],[-113,27],[-114,27],[-115,28],[-114,28],[-114,29],[-115,29],[-116,30],[-116,31],[-117,32],[-117,33],[-118,34],[-119,34],[-120,34],[-121,35],[-122,36],[-123,38],[-124,39],[-124,40],[-124,41],[-124,42],[-125,43],[-124,44],[-124,46],[-124,47],[-124,48],[-125,48],[-123,48],[-123,47],[-122,47],[-123,48],[-123,49],[-125,50],[-126,50],[-127,51],[-128,52],[-129,53],[-129,54],[-131,54],[-131,55],[-132,55],[-132,56],[-134,57],[-134,58],[-135,58],[-137,58],[-138,59],[-140,60],[-141,60],[-143,60],[-144,60],[-146,60],[-147,61],[-148,61],[-148,60],[-149,60],[-150,60],[-151,59],[-152,59],[-152,60],[-151,61],[-150,61],[-151,61],[-152,61],[-153,60],[-154,59],[-153,59],[-154,58],[-155,58],[-156,57],[-157,57],[-158,56],[-160,56],[-161,55],[-162,55],[-163,55],[-165,54],[-165,55],[-164,55],[-163,55],[-162,56],[-161,56],[-160,56],[-159,57],[-158,57],[-158,58],[-157,59],[-158,59],[-159,59],[-159,58],[-160,59],[-161,59],[-162,59],[-162,60],[-163,60],[-164,60],[-165,60],[-165,61],[-166,61],[-166,62],[-165,63],[-164,63],[-163,63],[-162,64],[-162,63],[-161,64],[-162,64],[-161,65],[-162,65],[-163,64],[-164,65],[-165,64],[-166,65],[-167,65],[-168,66],[-167,66],[-164,67],[-164,66],[-162,66],[-162,67],[-164,67],[-164,68],[-165,68],[-167,68],[-166,69],[-164,69],[-163,69],[-163,70],[-162,70],[-161,70],[-159,71],[-158,71],[-157,71],[-155,71],[-154,71],[-152,71],[-151,70],[-150,71],[-148,70],[-146,70],[-145,70],[-144,70],[-142,70],[-141,70],[-139,69],[-138,69],[-137,69],[-136,69],[-134,70],[-133,70],[-131,70],[-130,70],[-129,70],[-128,70],[-127,70],[-126,69],[-124,70],[-124,69],[-123,70],[-121,70],[-120,69],[-118,69],[-116,69],[-115,69],[-114,68],[-115,68],[-113,68],[-111,68],[-110,68],[-109,67],[-108,68],[-109,68],[-108,69],[-107,69],[-106,69],[-105,69],[-104,68],[-103,68],[-101,68],[-100,68],[-98,68],[-99,68],[-98,69],[-96,68],[-96,67],[-95,68],[-94,69],[-95,70],[-96,70],[-96,71],[-95,72],[-94,72],[-93,71],[-92,70],[-91,69]]],[[[-114,73],[-115,73],[-112,73],[-111,72],[-110,73],[-109,73],[-108,72],[-108,73],[-107,73],[-105,73],[-105,72],[-104,71],[-103,70],[-101,70],[-103,70],[-102,69],[-104,69],[-106,69],[-107,69],[-109,69],[-112,69],[-113,69],[-114,69],[-115,69],[-116,69],[-117,70],[-115,70],[-114,70],[-112,70],[-114,71],[-116,71],[-118,71],[-116,71],[-118,71],[-119,72],[-118,73],[-115,73],[-114,73]]],[[[-105,73],[-107,73],[-107,74],[-105,74],[-105,73]]],[[[-76,73],[-77,73],[-78,73],[-79,73],[-80,73],[-81,73],[-81,74],[-80,74],[-78,74],[-76,73]]],[[[-87,73],[-86,73],[-85,73],[-82,74],[-81,73],[-81,72],[-79,72],[-78,73],[-76,72],[-74,72],[-74,71],[-72,72],[-71,71],[-69,71],[-68,70],[-67,69],[-69,69],[-66,68],[-65,68],[-63,67],[-62,67],[-62,66],[-64,65],[-65,65],[-67,66],[-68,66],[-67,65],[-66,65],[-65,64],[-65,63],[-66,63],[-69,64],[-67,63],[-66,62],[-69,62],[-71,63],[-72,63],[-72,64],[-73,64],[-75,65],[-75,64],[-78,64],[-79,65],[-78,65],[-76,65],[-74,65],[-74,66],[-73,67],[-73,68],[-75,69],[-77,69],[-76,69],[-77,70],[-78,70],[-79,70],[-81,70],[-85,70],[-87,70],[-89,70],[-90,71],[-88,71],[-90,71],[-90,72],[-89,73],[-88,74],[-86,74],[-87,73]]],[[[-100,74],[-99,74],[-97,74],[-97,73],[-98,73],[-97,73],[-97,72],[-98,71],[-99,71],[-100,72],[-102,73],[-100,73],[-102,73],[-100,74]]],[[[144,73],[142,73],[140,73],[141,74],[142,74],[143,73],[144,73]]],[[[-93,73],[-94,72],[-95,72],[-96,73],[-95,74],[-92,74],[-91,74],[-92,73],[-93,73]]],[[[-120,71],[-123,71],[-124,71],[-126,72],[-125,73],[-124,74],[-125,74],[-122,74],[-120,74],[-118,74],[-117,74],[-116,73],[-117,73],[-119,73],[-120,72],[-120,71]]],[[[151,75],[150,75],[148,75],[146,75],[148,75],[151,75]]],[[[-94,75],[-96,75],[-97,75],[-96,75],[-95,76],[-94,75]]],[[[145,76],[144,75],[141,75],[139,75],[137,75],[138,76],[139,76],[141,76],[145,76]]],[[[-98,77],[-98,76],[-98,75],[-100,75],[-101,75],[-101,76],[-103,76],[-101,76],[-100,77],[-99,77],[-98,77]]],[[[-108,76],[-107,76],[-106,76],[-106,75],[-110,75],[-112,74],[-114,74],[-114,75],[-112,75],[-116,75],[-118,75],[-116,76],[-115,76],[-113,76],[-111,76],[-109,75],[-110,76],[-110,77],[-109,77],[-108,76]]],[[[58,71],[57,71],[54,71],[53,71],[52,71],[51,72],[52,72],[52,73],[54,74],[56,75],[58,76],[61,76],[65,76],[66,77],[68,77],[69,77],[68,76],[65,76],[62,75],[58,74],[57,73],[55,72],[56,72],[58,71]]],[[[-95,77],[-94,77],[-92,77],[-91,76],[-90,76],[-89,76],[-88,76],[-86,75],[-85,76],[-83,76],[-81,76],[-80,75],[-82,74],[-83,75],[-86,74],[-88,74],[-90,75],[-92,75],[-93,75],[-93,76],[-94,76],[-96,76],[-97,77],[-95,77]]],[[[-116,78],[-116,77],[-117,77],[-118,76],[-120,76],[-121,76],[-123,76],[-121,77],[-119,78],[-118,77],[-116,78]]],[[[-94,78],[-94,77],[-96,78],[-94,78]]],[[[-110,78],[-112,77],[-114,78],[-113,78],[-111,78],[-110,78]]],[[[25,78],[22,77],[21,78],[23,78],[25,78]]],[[[-110,79],[-111,78],[-113,78],[-113,79],[-111,79],[-110,79]]],[[[-96,78],[-97,78],[-98,78],[-99,78],[-99,79],[-97,79],[-96,78]]],[[[-100,78],[-101,78],[-103,78],[-105,78],[-104,79],[-105,79],[-104,79],[-101,79],[-100,78]]],[[[105,78],[99,78],[101,79],[102,79],[103,79],[105,79],[105,78]]],[[[18,80],[22,79],[19,79],[18,78],[17,77],[16,77],[14,77],[15,78],[13,78],[11,79],[10,80],[13,80],[14,80],[15,80],[16,80],[17,80],[18,80]]],[[[25,80],[27,80],[26,80],[23,79],[20,80],[18,80],[17,80],[20,81],[22,80],[23,81],[25,80]]],[[[51,81],[50,80],[49,80],[48,80],[47,80],[47,81],[45,81],[47,81],[48,81],[49,81],[50,81],[52,81],[51,81]]],[[[100,79],[98,79],[95,79],[93,79],[93,80],[91,80],[94,81],[96,81],[98,81],[100,80],[100,79]]],[[[-87,80],[-86,79],[-87,79],[-89,78],[-91,78],[-93,78],[-94,79],[-93,79],[-95,79],[-96,80],[-97,80],[-96,81],[-95,81],[-94,81],[-95,81],[-92,81],[-91,81],[-89,81],[-88,80],[-87,80]]],[[[-68,83],[-66,83],[-64,83],[-62,83],[-62,82],[-64,82],[-67,82],[-68,82],[-65,82],[-68,81],[-69,81],[-71,80],[-73,80],[-74,79],[-77,79],[-76,79],[-75,79],[-76,78],[-78,78],[-80,77],[-78,77],[-81,76],[-83,76],[-86,76],[-88,76],[-89,76],[-90,77],[-88,77],[-88,78],[-85,78],[-86,78],[-88,78],[-87,79],[-85,79],[-87,80],[-84,80],[-83,80],[-82,80],[-84,81],[-88,81],[-89,81],[-90,81],[-91,82],[-92,82],[-90,82],[-89,82],[-87,82],[-85,83],[-84,83],[-83,82],[-82,83],[-81,83],[-79,83],[-76,83],[-73,83],[-71,83],[-68,83]]],[[[-27,84],[-21,83],[-23,82],[-27,82],[-32,82],[-31,82],[-28,82],[-25,82],[-23,82],[-22,82],[-23,81],[-21,82],[-16,82],[-13,82],[-12,81],[-16,81],[-17,80],[-20,80],[-18,80],[-19,79],[-20,79],[-20,78],[-18,77],[-20,77],[-22,77],[-20,76],[-20,75],[-21,75],[-19,74],[-22,74],[-20,74],[-21,73],[-22,73],[-24,73],[-22,73],[-22,72],[-24,73],[-25,72],[-23,72],[-22,71],[-24,70],[-24,71],[-26,71],[-25,71],[-26,70],[-24,70],[-22,70],[-25,69],[-28,68],[-31,68],[-32,68],[-33,68],[-34,67],[-36,66],[-37,66],[-38,66],[-40,65],[-41,65],[-41,64],[-41,63],[-43,63],[-42,62],[-43,61],[-43,60],[-45,60],[-46,61],[-48,61],[-49,61],[-50,62],[-52,64],[-52,65],[-54,66],[-53,67],[-54,67],[-53,68],[-51,69],[-51,70],[-52,70],[-53,69],[-55,70],[-54,71],[-53,71],[-51,71],[-53,71],[-54,72],[-55,71],[-56,72],[-55,73],[-56,74],[-57,75],[-59,75],[-59,76],[-61,76],[-63,76],[-66,76],[-69,76],[-70,76],[-71,77],[-69,77],[-67,77],[-71,78],[-73,78],[-69,79],[-66,79],[-65,80],[-68,80],[-67,81],[-64,81],[-62,81],[-63,82],[-60,82],[-57,82],[-54,82],[-53,82],[-50,82],[-48,82],[-47,82],[-45,82],[-47,82],[-47,83],[-43,83],[-40,83],[-39,84],[-35,84],[-27,84]]]]};

// Draw GeoJSON MultiPolygon onto canvas as equirectangular projection
function drawLand(ctx, W, H, geo) {
  var coords = geo.coordinates;
  for (var i = 0; i < coords.length; i++) {
    for (var j = 0; j < coords[i].length; j++) {
      var ring = coords[i][j];
      if (ring.length < 3) continue;
      ctx.beginPath();
      var x0 = ((ring[0][0] + 180) / 360) * W;
      var y0 = ((90 - ring[0][1]) / 180) * H;
      ctx.moveTo(x0, y0);
      for (var k = 1; k < ring.length; k++) {
        var x = ((ring[k][0] + 180) / 360) * W;
        var y = ((90 - ring[k][1]) / 180) * H;
        // Handle antimeridian wrapping
        var prevX = ((ring[k-1][0] + 180) / 360) * W;
        if (Math.abs(x - prevX) > W * 0.5) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }
      ctx.closePath();
      if (j === 0) {
        // Outer ring — fill with land color based on latitude
        var avgLat = ring.reduce(function(s,p){return s + Math.abs(p[1]);}, 0) / ring.length;
        var fill;
        if (avgLat > 70) fill = "#b8b4a8";
        else if (avgLat > 58) fill = "#4a6a3e";
        else if (avgLat > 45) fill = "#5a7a48";
        else if (avgLat > 30) fill = "#6a8a4e";
        else if (avgLat > 15) fill = "#7a9054";
        else fill = "#3a7a3a";
        ctx.fillStyle = fill;
        ctx.fill();
        ctx.strokeStyle = "#2a4a20";
        ctx.lineWidth = 0.5;
        ctx.stroke();
      }
    }
  }
}

function makeEarth(W, H) {
  var c = document.createElement("canvas");
  c.width = W; c.height = H;
  var g = c.getContext("2d");

  // Ocean gradient
  var oc = g.createLinearGradient(0, 0, 0, H);
  oc.addColorStop(0, "#101e30");
  oc.addColorStop(0.12, "#0c3060");
  oc.addColorStop(0.3, "#0e4880");
  oc.addColorStop(0.45, "#106098");
  oc.addColorStop(0.5, "#1272ab");
  oc.addColorStop(0.55, "#106098");
  oc.addColorStop(0.7, "#0e4880");
  oc.addColorStop(0.88, "#0c3060");
  oc.addColorStop(1, "#101e30");
  g.fillStyle = oc;
  g.fillRect(0, 0, W, H);

  // Subtle ocean noise
  var id = g.getImageData(0, 0, W, H);
  for (var i = 0; i < id.data.length; i += 4) {
    var n = (Math.random() - 0.5) * 4;
    id.data[i] = Math.max(0, Math.min(255, id.data[i] + n));
    id.data[i+1] = Math.max(0, Math.min(255, id.data[i+1] + n));
    id.data[i+2] = Math.max(0, Math.min(255, id.data[i+2] + n));
  }
  g.putImageData(id, 0, 0);

  // Draw accurate Natural Earth coastlines
  drawLand(g, W, H, LAND_GEO);

  // Desert overlays
  g.globalAlpha = 0.5;
  var deserts = [
    [[-12,16],[0,22],[12,28],[24,28],[32,22],[20,16],[0,14],[-12,16]],
    [[40,18],[48,22],[54,22],[48,16],[40,18]],
    [[120,-20],[134,-24],[138,-28],[132,-30],[124,-24],[120,-20]],
    [[88,36],[100,44],[110,42],[106,36],[94,36],[88,36]],
  ];
  deserts.forEach(function(d){
    g.beginPath();
    g.moveTo(((d[0][0]+180)/360)*W, ((90-d[0][1])/180)*H);
    for(var i=1;i<d.length;i++) g.lineTo(((d[i][0]+180)/360)*W, ((90-d[i][1])/180)*H);
    g.closePath(); g.fillStyle="#b8a048"; g.fill();
  });
  g.globalAlpha = 1.0;

  // Ice caps
  g.fillStyle = "#d8e4e8";
  g.fillRect(0, 0, W, H * 0.025);
  var ng = g.createLinearGradient(0, 0, 0, H * 0.06);
  ng.addColorStop(0, "rgba(220,232,236,0.9)");
  ng.addColorStop(1, "rgba(220,232,236,0)");
  g.fillStyle = ng; g.fillRect(0, 0, W, H * 0.06);
  g.fillStyle = "#d0dce0";
  g.fillRect(0, H * 0.965, W, H * 0.035);
  var sg = g.createLinearGradient(0, H * 0.9, 0, H);
  sg.addColorStop(0, "rgba(210,224,228,0)");
  sg.addColorStop(1, "rgba(210,224,228,0.92)");
  g.fillStyle = sg; g.fillRect(0, H * 0.9, W, H * 0.1);

  return c;
}

function makeNight(W, H) {
  var c = document.createElement("canvas");
  c.width = W; c.height = H;
  var g = c.getContext("2d");
  g.fillStyle = "#000"; g.fillRect(0, 0, W, H);
  [[126.9,37.5,3],[129,35.2,2],[139.7,35.7,4],[135.5,34.7,3],[121.5,31.2,4],[116.4,39.9,4],[113.3,23.1,3],[114.2,22.3,2],[103.8,1.4,2],[100.5,13.8,2],[77.2,28.6,3],[72.9,19.1,3],[88.4,22.6,2],[-0.1,51.5,4],[2.3,48.9,4],[13.4,52.5,3],[-3.7,40.4,3],[12.5,41.9,2],[9.2,45.5,2],[37.6,55.8,3],[30.5,50.5,2],[-74,40.7,4],[-87.6,41.9,3],[-118.2,34.1,4],[-122.4,37.8,3],[-95.4,29.8,3],[-80.2,25.8,2],[-99.1,19.4,3],[-43.2,-22.9,3],[-46.6,-23.5,3],[-58.4,-34.6,3],[-70.7,-33.4,2],[51.4,25.3,2],[55.3,25.3,2],[3.4,6.5,1],[28.2,-26.2,2],[31.2,30.1,2],[151.2,-33.9,3],[144.9,-37.8,2]].forEach(function(ci){
    var x=((ci[0]+180)/360)*W, y=((90-ci[1])/180)*H, r=ci[2]*5;
    var gd=g.createRadialGradient(x,y,0,x,y,r);
    gd.addColorStop(0,"rgba(255,220,140,"+(0.3*ci[2]/4)+")");
    gd.addColorStop(1,"rgba(255,200,100,0)");
    g.fillStyle=gd; g.fillRect(x-r,y-r,r*2,r*2);
    for(var j=0;j<ci[2]*5;j++){
      g.fillStyle="rgba(255,215,130,"+(0.25+Math.random()*0.35).toFixed(2)+")";
      g.fillRect(x+(Math.random()-0.5)*r*2,y+(Math.random()-0.5)*r,Math.random()+0.3,Math.random()+0.3);
    }
  });
  return c;
}

var C=[
  {id:"KR",n:"South Korea",lat:36.5,lng:127.8,ai:{lv:3,law:"AI Basic Act",st:"Enacted Jan 2026",sm:"High-risk AI classification, impact assessment, AI Committee",url:"https://www.law.go.kr/LSW/lsInfoP.do?lsiSeq=268543"},cr:{lv:3,law:"Virtual Asset Protection Act",st:"Enacted Jul 2024",sm:"User protection, unfair trading prohibition",url:"https://www.law.go.kr/LSW/lsInfoP.do?lsiSeq=261099"}},
  {id:"JP",n:"Japan",lat:36.2,lng:138.3,ai:{lv:1,law:"AI Guidelines",st:"Voluntary",sm:"Soft law, non-binding",url:"https://www.soumu.go.jp/"},cr:{lv:3,law:"Payment Services Act",st:"In force",sm:"Exchange registration system",url:"https://www.fsa.go.jp/"}},
  {id:"CN",n:"China",lat:35.9,lng:104.2,ai:{lv:3,law:"Generative AI Measures",st:"In force",sm:"Algorithm & GenAI regulation",url:"https://www.cac.gov.cn/"},cr:{lv:4,law:"Full Ban",st:"Banned 2021",sm:"Trading & mining prohibited",url:"https://www.pbc.gov.cn/"}},
  {id:"SG",n:"Singapore",lat:1.4,lng:103.8,ai:{lv:2,law:"AI Governance",st:"Framework",sm:"Self-regulation",url:"https://www.pdpc.gov.sg/"},cr:{lv:3,law:"PSA",st:"In force",sm:"DPT licensing regime",url:"https://www.mas.gov.sg/"}},
  {id:"IN",n:"India",lat:20.6,lng:79,ai:{lv:1,law:"No legislation",st:"Unregulated",sm:"Pro-innovation stance",url:"https://www.meity.gov.in/"},cr:{lv:2,law:"30% Tax Regime",st:"Partial",sm:"30% income tax on gains",url:"https://www.incometax.gov.in/"}},
  {id:"AE",n:"UAE",lat:23.4,lng:53.8,ai:{lv:2,law:"National AI Strategy",st:"Strategic",sm:"AI Minister, regulatory sandbox",url:"https://ai.gov.ae/"},cr:{lv:3,law:"VARA",st:"In force",sm:"Licensing regime",url:"https://www.vara.ae/"}},
  {id:"HK",n:"Hong Kong",lat:22.3,lng:114.2,ai:{lv:1,law:"AI Guidelines",st:"Guidelines",sm:"Ethics-focused approach",url:"https://www.ogcio.gov.hk/"},cr:{lv:3,law:"Licensing Regime",st:"In force",sm:"Exchange licensing required",url:"https://www.sfc.hk/"}},
  {id:"EU",n:"EU",lat:50.1,lng:9.7,ai:{lv:4,law:"EU AI Act",st:"Effective Aug 2024",sm:"4-tier risk, up to 7% revenue fine",url:"https://artificialintelligenceact.eu/"},cr:{lv:4,law:"MiCA",st:"Effective Dec 2024",sm:"Comprehensive CASP authorization",url:"https://www.esma.europa.eu/"}},
  {id:"GB",n:"United Kingdom",lat:55.4,lng:-3.4,ai:{lv:2,law:"Pro-Innovation",st:"Framework",sm:"Sector-specific regulators",url:"https://www.gov.uk/"},cr:{lv:2,law:"FCA",st:"Pending",sm:"Stablecoin legislation pending",url:"https://www.fca.org.uk/"}},
  {id:"US",n:"United States",lat:39.8,lng:-98.6,ai:{lv:2,law:"Exec Order + State Laws",st:"Fragmented",sm:"No federal AI law",url:"https://www.nist.gov/artificial-intelligence"},cr:{lv:2,law:"SEC/CFTC",st:"Fragmented",sm:"Securities enforcement actions",url:"https://www.sec.gov/"}},
  {id:"CA",n:"Canada",lat:56.1,lng:-106.3,ai:{lv:2,law:"AIDA",st:"Pending",sm:"AI & Data Act in progress",url:"https://ised-isde.canada.ca/"},cr:{lv:3,law:"CSA",st:"In force",sm:"Exchange registration required",url:"https://www.securities-administrators.ca/"}},
  {id:"BR",n:"Brazil",lat:-14.2,lng:-51.9,ai:{lv:2,law:"AI Bill",st:"Pending",sm:"Risk-based classification",url:"https://www.gov.br/mcti/"},cr:{lv:3,law:"Crypto Asset Act",st:"Enacted 2023",sm:"VASP authorization required",url:"https://www.bcb.gov.br/"}},
  {id:"AU",n:"Australia",lat:-25.3,lng:133.8,ai:{lv:2,law:"AI Guardrails",st:"In progress",sm:"High-risk AI focus",url:"https://www.industry.gov.au/"},cr:{lv:2,law:"Licensing Proposal",st:"Pending",sm:"License regime in development",url:"https://treasury.gov.au/"}},
  {id:"DE",n:"Germany",lat:51.2,lng:10.5,ai:{lv:4,law:"EU AI Act",st:"In force",sm:"BaFin supervision",url:"https://artificialintelligenceact.eu/"},cr:{lv:4,law:"MiCA",st:"In force",sm:"BaFin licensing",url:"https://www.bafin.de/"}},
  {id:"CH",n:"Switzerland",lat:46.8,lng:8.2,ai:{lv:1,law:"None",st:"Existing law",sm:"Pro-innovation stance",url:"https://www.sbfi.admin.ch/"},cr:{lv:3,law:"DLT Act",st:"In force",sm:"Crypto Valley framework",url:"https://www.finma.ch/"}},
  {id:"SV",n:"El Salvador",lat:13.8,lng:-88.9,ai:{lv:0,law:"None",st:"Unregulated",sm:"None",url:"#"},cr:{lv:3,law:"Bitcoin Law",st:"2021",sm:"BTC as legal tender",url:"https://www.bcr.gob.sv/"}},
  {id:"RU",n:"Russia",lat:61.5,lng:105.3,ai:{lv:2,law:"AI Strategy",st:"Strategic",sm:"Regulatory sandbox",url:"http://government.ru/"},cr:{lv:2,law:"Digital Assets Law",st:"Partial",sm:"Mining legalized",url:"https://cbr.ru/"}},
  {id:"SA",n:"Saudi Arabia",lat:23.9,lng:45.1,ai:{lv:2,law:"AI Ethics Framework",st:"Strategic",sm:"SDAIA",url:"https://sdaia.gov.sa/"},cr:{lv:1,law:"No framework",st:"Unregulated",sm:"None",url:"https://www.sama.gov.sa/"}},
  {id:"NG",n:"Nigeria",lat:9.1,lng:8.7,ai:{lv:1,law:"Under development",st:"Early stage",sm:"National strategy drafted",url:"https://nitda.gov.ng/"},cr:{lv:2,law:"SEC",st:"Partial",sm:"Ban reversed to regulation",url:"https://sec.gov.ng/"}},
  {id:"ZA",n:"South Africa",lat:-30.6,lng:22.9,ai:{lv:1,law:"Under discussion",st:"Early stage",sm:"Policy discussion phase",url:"https://www.gov.za/"},cr:{lv:2,law:"FSCA",st:"Partial",sm:"Classified as financial product",url:"https://www.fsca.co.za/"}},
];
var LC=["#2a2a3a","#2d6a4f","#e9c46a","#e76f51","#d62828"];
var LG=["#2a2a3a","#40b87a","#f0d060","#ff8060","#ff3030"];
var LL=["None","Early","Framework","Enacted","Comprehensive"];

function toV(lat,lng,r){var p=(90-lat)*Math.PI/180,t=(lng+180)*Math.PI/180;return new THREE.Vector3(-r*Math.sin(p)*Math.cos(t),r*Math.cos(p),r*Math.sin(p)*Math.sin(t));}

function App(){
  var mountRef=useRef(null),mGRef=useRef(null),mA=useRef([]),bA=useRef([]);
  var rc=useRef(new THREE.Raycaster()),m2=useRef(new THREE.Vector2()),camRef=useRef(null);
  var dr=useRef({on:false,lx:0,ly:0,mv:false});
  var rot=useRef({x:0.15,y:-1.8}),tg=useRef({x:0.15,y:-1.8});
  var aR=useRef(true),aT=useRef(null),af=useRef(null);

  var [layer,setLayer]=useState("ai");
  var [sel,setSel]=useState(null);
  var [pan,setPan]=useState(false);

  var buildM=useCallback(function(grp){
    if(!grp)return;while(grp.children.length>0)grp.remove(grp.children[0]);mA.current=[];bA.current=[];
    C.forEach(function(c){
      var d=layer==="ai"?c.ai:c.cr,lv=d.lv,gc=new THREE.Color(LG[lv]);
      var R=1.005,bH=0.04+lv*0.025,mS=lv>=3?0.022:lv>=2?0.016:0.011;
      var beam=new THREE.Mesh(new THREE.CylinderGeometry(0.004,0.001,bH,6),new THREE.MeshBasicMaterial({color:gc,transparent:true,opacity:0.5}));
      beam.position.copy(toV(c.lat,c.lng,R+bH/2));beam.lookAt(new THREE.Vector3(0,0,0));beam.rotateX(Math.PI/2);beam.userData={bo:0.5};grp.add(beam);bA.current.push(beam);
      var mk=new THREE.Mesh(new THREE.OctahedronGeometry(mS,0),new THREE.MeshBasicMaterial({color:new THREE.Color(LC[lv]),transparent:true,opacity:0.95}));
      mk.position.copy(toV(c.lat,c.lng,R+bH+0.015));mk.userData={country:c};grp.add(mk);mA.current.push(mk);
      var sp=new THREE.Sprite(new THREE.SpriteMaterial({color:gc,transparent:true,opacity:0.2,blending:THREE.AdditiveBlending}));
      sp.position.copy(mk.position);sp.scale.set(mS*6,mS*6,1);grp.add(sp);
      var ring=new THREE.Mesh(new THREE.RingGeometry(0.012,0.018,20),new THREE.MeshBasicMaterial({color:gc,transparent:true,opacity:0.3,side:THREE.DoubleSide}));
      ring.position.copy(toV(c.lat,c.lng,R));ring.lookAt(new THREE.Vector3(0,0,0));grp.add(ring);
    });
  },[layer]);

  useEffect(function(){
    var box=mountRef.current;if(!box)return;
    var w=box.clientWidth,h=box.clientHeight;
    var scene=new THREE.Scene();
    var cam=new THREE.PerspectiveCamera(32,w/h,0.1,200);
    cam.position.set(0,0,4.0);camRef.current=cam;
    var ren=new THREE.WebGLRenderer({antialias:true});
    ren.setSize(w,h);ren.setPixelRatio(Math.min(window.devicePixelRatio,2));ren.setClearColor(0x020408,1);
    box.appendChild(ren.domElement);
    var pivot=new THREE.Group();scene.add(pivot);

    // Earth with embedded Natural Earth coastlines
    // === EARTH TEXTURE: Try satellite image first, fallback to procedural ===
    var earthMat = new THREE.MeshPhongMaterial({shininess:8,specular:new THREE.Color(0x111122)});
    var earthMesh = new THREE.Mesh(new THREE.SphereGeometry(1,96,48), earthMat);
    pivot.add(earthMesh);
    
    // Attempt to load satellite texture from same directory
    // To use: place "earth-texture.jpg" in the same folder as this HTML file
    // Download from: https://eoimages.gsfc.nasa.gov/images/imagerecords/74000/74393/world.topo.200412.3x5400x2700.jpg
    var satLoader = new THREE.TextureLoader();
    satLoader.load("earth-texture.jpg", 
      function(satTex) {
        // SUCCESS: Satellite texture loaded
        earthMat.map = satTex;
        earthMat.needsUpdate = true;
        console.log("[REGULATORY RADAR] Satellite texture loaded successfully");
      },
      undefined,
      function() {
        // FALLBACK: Use procedural Natural Earth texture
        console.log("[REGULATORY RADAR] No satellite texture found, using procedural map");
        var earthCanvas = makeEarth(2048,1024);
        var tex = new THREE.CanvasTexture(earthCanvas);
        tex.needsUpdate = true;
        earthMat.map = tex;
        earthMat.needsUpdate = true;
      }
    );

    // Night lights
    var nightCanvas=makeNight(2048,1024);
    var nightTex=new THREE.CanvasTexture(nightCanvas);nightTex.needsUpdate=true;
    pivot.add(new THREE.Mesh(new THREE.SphereGeometry(1.003,96,48),new THREE.MeshBasicMaterial({map:nightTex,transparent:true,opacity:0.4,blending:THREE.AdditiveBlending,depthWrite:false})));

    // Atmosphere
    pivot.add(new THREE.Mesh(new THREE.SphereGeometry(1.1,48,48),new THREE.MeshBasicMaterial({color:0x4488cc,transparent:true,opacity:0.06,side:THREE.BackSide})));
    pivot.add(new THREE.Mesh(new THREE.SphereGeometry(1.05,48,48),new THREE.MeshBasicMaterial({color:0x88bbff,transparent:true,opacity:0.035,side:THREE.BackSide})));

    // Lights
    var sun=new THREE.DirectionalLight(0xffffff,1.6);sun.position.set(5,3,5);scene.add(sun);
    var fill=new THREE.DirectionalLight(0x334466,0.3);fill.position.set(-3,-1,-3);scene.add(fill);
    scene.add(new THREE.AmbientLight(0x223344,0.5));

    // Stars
    var sN=3000,sA=new Float32Array(sN*3);
    for(var i=0;i<sN;i++){var th=Math.random()*Math.PI*2,ph=Math.acos(2*Math.random()-1),rr=25+Math.random()*50;sA[i*3]=rr*Math.sin(ph)*Math.cos(th);sA[i*3+1]=rr*Math.sin(ph)*Math.sin(th);sA[i*3+2]=rr*Math.cos(ph);}
    var sG=new THREE.BufferGeometry();sG.setAttribute("position",new THREE.BufferAttribute(sA,3));
    scene.add(new THREE.Points(sG,new THREE.PointsMaterial({color:0xffffff,size:0.03,transparent:true,opacity:0.5})));

    var mGroup=new THREE.Group();pivot.add(mGroup);mGRef.current=mGroup;buildM(mGroup);

    var time=0;
    function animate(){
      af.current=requestAnimationFrame(animate);time+=0.016;
      if(aR.current&&!dr.current.on)tg.current.y+=0.0004;
      rot.current.x+=(tg.current.x-rot.current.x)*0.05;
      rot.current.y+=(tg.current.y-rot.current.y)*0.05;
      pivot.rotation.x=rot.current.x;pivot.rotation.y=rot.current.y;
      for(var i=0;i<mA.current.length;i++)mA.current[i].rotation.y+=0.012;
      for(var j=0;j<bA.current.length;j++)bA.current[j].material.opacity=bA.current[j].userData.bo+Math.sin(time*1.8+j*0.5)*0.12;
      ren.render(scene,cam);
    }
    animate();

    var cv=ren.domElement;
    function onDown(e){dr.current.on=true;dr.current.mv=false;aR.current=false;clearTimeout(aT.current);dr.current.lx=e.touches?e.touches[0].clientX:e.clientX;dr.current.ly=e.touches?e.touches[0].clientY:e.clientY;}
    function onMove(e){if(!dr.current.on)return;var cx=e.touches?e.touches[0].clientX:e.clientX,cy=e.touches?e.touches[0].clientY:e.clientY;var dx=cx-dr.current.lx,dy=cy-dr.current.ly;if(Math.abs(dx)>2||Math.abs(dy)>2)dr.current.mv=true;tg.current.y+=dx*0.004;tg.current.x+=dy*0.004;tg.current.x=Math.max(-1.2,Math.min(1.2,tg.current.x));dr.current.lx=cx;dr.current.ly=cy;}
    function onUp(){dr.current.on=false;aT.current=setTimeout(function(){aR.current=true;},4000);}
    function onClick(e){if(dr.current.mv)return;var rect=cv.getBoundingClientRect();var cx=e.changedTouches?e.changedTouches[0].clientX:e.clientX,cy=e.changedTouches?e.changedTouches[0].clientY:e.clientY;m2.current.x=((cx-rect.left)/rect.width)*2-1;m2.current.y=-((cy-rect.top)/rect.height)*2+1;rc.current.setFromCamera(m2.current,cam);var hits=rc.current.intersectObjects(mA.current,false);if(hits.length>0){setSel(hits[0].object.userData.country);setPan(true);}}
    function onWheel(e){e.preventDefault();cam.position.z=Math.max(1.8,Math.min(6,cam.position.z+e.deltaY*0.002));}
    cv.addEventListener("mousedown",onDown);cv.addEventListener("mousemove",onMove);cv.addEventListener("mouseup",onUp);cv.addEventListener("mouseleave",onUp);
    cv.addEventListener("touchstart",onDown,{passive:true});cv.addEventListener("touchmove",onMove,{passive:true});cv.addEventListener("touchend",onUp);
    cv.addEventListener("click",onClick);cv.addEventListener("wheel",onWheel,{passive:false});
    function onR(){var w2=box.clientWidth,h2=box.clientHeight;cam.aspect=w2/h2;cam.updateProjectionMatrix();ren.setSize(w2,h2);}
    window.addEventListener("resize",onR);
    return function(){cancelAnimationFrame(af.current);clearTimeout(aT.current);cv.removeEventListener("mousedown",onDown);cv.removeEventListener("mousemove",onMove);cv.removeEventListener("mouseup",onUp);cv.removeEventListener("mouseleave",onUp);cv.removeEventListener("touchstart",onDown);cv.removeEventListener("touchmove",onMove);cv.removeEventListener("touchend",onUp);cv.removeEventListener("click",onClick);cv.removeEventListener("wheel",onWheel);window.removeEventListener("resize",onR);ren.dispose();if(box.contains(ren.domElement))box.removeChild(ren.domElement);};
  },[]);

  useEffect(function(){if(mGRef.current)buildM(mGRef.current);},[layer,buildM]);
  useEffect(function(){if(!sel)return;tg.current.y=-(sel.lng+90)*Math.PI/180;tg.current.x=sel.lat*Math.PI/180*0.35;aR.current=false;clearTimeout(aT.current);aT.current=setTimeout(function(){aR.current=true;},6000);},[sel]);

  var sd=sel?(layer==="ai"?sel.ai:sel.cr):null;
  var od=sel?(layer==="ai"?sel.cr:sel.ai):null;

  return(
    <div style={{width:"100%",height:"100vh",background:"#020408",fontFamily:"'Courier New',monospace",color:"#c8d0d8",overflow:"hidden",position:"relative"}}>
      <style>{`
        @keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
        @keyframes panIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes scanDown{0%{top:0;opacity:1}100%{top:100%;opacity:0}}
        @keyframes glitch1{0%,100%{transform:translate(0)}20%{transform:translate(-2px,1px)}40%{transform:translate(2px,-1px)}60%{transform:translate(-1px,2px)}80%{transform:translate(1px,-2px)}}
        @keyframes glitch2{0%,100%{clip-path:inset(0 0 0 0)}20%{clip-path:inset(20% 0 60% 0)}40%{clip-path:inset(40% 0 20% 0)}60%{clip-path:inset(60% 0 10% 0)}80%{clip-path:inset(10% 0 80% 0)}}
        @keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
        @keyframes barGrow{from{width:0}to{width:var(--tw)}}
        @keyframes countPulse{0%{transform:scale(1)}50%{transform:scale(1.3)}100%{transform:scale(1)}}
        @keyframes borderPulse{0%{border-color:rgba(0,170,255,.4)}50%{border-color:rgba(0,170,255,.1)}100%{border-color:rgba(0,170,255,.4)}}
        @keyframes hexScroll{0%{background-position:0 0}100%{background-position:0 -200px}}
        @keyframes alertFlash{0%,100%{opacity:0}10%,90%{opacity:1}}
        @keyframes slideReveal{from{max-height:0;opacity:0}to{max-height:500px;opacity:1}}
        @keyframes typeBar{0%,100%{opacity:1}50%{opacity:0}}
        @keyframes ringPulse{0%{transform:scale(1);opacity:.6}100%{transform:scale(2.5);opacity:0}}
        *{box-sizing:border-box;margin:0;padding:0}button{font-family:inherit;cursor:pointer}
        ::-webkit-scrollbar{width:3px}::-webkit-scrollbar-thumb{background:#1a2030;border-radius:2px}
        .scan-line{position:absolute;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba(0,170,255,.6),transparent);animation:scanDown 1.5s ease-out forwards;pointer-events:none;z-index:30}
        .glitch-text{animation:glitch1 .3s ease-in-out 2}
        .hex-bg{background-image:repeating-linear-gradient(0deg,transparent,transparent 10px,rgba(0,170,255,.02) 10px,rgba(0,170,255,.02) 11px);animation:hexScroll 8s linear infinite}
      `}</style>

      <div ref={mountRef} style={{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1}}/>
      <div style={{position:"absolute",inset:0,pointerEvents:"none",background:"radial-gradient(ellipse at center,transparent 40%,rgba(2,4,8,.75) 100%)",zIndex:2}}/>

      {/* TOP BAR */}
      <div style={{position:"absolute",top:0,left:0,right:0,zIndex:10,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(180deg,rgba(2,4,8,.8),transparent)"}}>
        <div style={{display:"flex",alignItems:"center",gap:10}}>
          <div style={{width:7,height:7,borderRadius:"50%",background:"#0f0",animation:"blink 2s infinite",boxShadow:"0 0 8px #0f0"}}/>
          <span style={{fontSize:15,fontWeight:700,letterSpacing:3}}>REGULATORY<span style={{color:"#0af"}}>RADAR</span></span>
          <span style={{fontSize:7,color:"#555",letterSpacing:1}}>● NATURAL EARTH 110M</span>
        </div>
        <div style={{display:"flex",gap:8}}>
          {[{k:"ai",l:"◆ AI"},{k:"crypto",l:"◈ CRYPTO"}].map(function(o){
            return <button key={o.k} onClick={function(){setLayer(o.k);setSel(null);setPan(false);}} style={{padding:"5px 14px",fontSize:10,borderRadius:3,letterSpacing:1,border:"1px solid "+(layer===o.k?"#0af":"rgba(255,255,255,.1)"),background:layer===o.k?"rgba(0,170,255,.15)":"rgba(0,0,0,.4)",color:layer===o.k?"#0af":"#888"}}>{o.l}</button>;
          })}
        </div>
      </div>

      {/* BOTTOM */}
      <div style={{position:"absolute",bottom:0,left:0,right:0,zIndex:10,padding:"8px 16px 10px",background:"linear-gradient(0deg,rgba(2,4,8,.85),transparent)"}}>
        <div style={{display:"flex",gap:10,marginBottom:6}}>
          {LL.map(function(lb,i){return <div key={i} style={{display:"flex",alignItems:"center",gap:3}}><div style={{width:6,height:6,borderRadius:"50%",background:LC[i]}}/><span style={{fontSize:7,color:"#666"}}>{lb}</span></div>;})}
        </div>
        <div style={{display:"flex",flexWrap:"wrap",gap:4}}>
          {C.slice().sort(function(a,b){return(layer==="ai"?b.ai.lv:b.cr.lv)-(layer==="ai"?a.ai.lv:a.cr.lv);}).map(function(c){
            var d=layer==="ai"?c.ai:c.cr,is=sel&&sel.id===c.id;
            return <button key={c.id} onClick={function(){setSel(c);setPan(true);}} style={{padding:"4px 8px",fontSize:9,borderRadius:3,background:is?"rgba(0,170,255,.2)":"rgba(0,0,0,.5)",border:"1px solid "+(is?"rgba(0,170,255,.4)":"rgba(255,255,255,.06)"),color:is?"#0af":"#999",display:"flex",alignItems:"center",gap:3}}><span style={{fontSize:6,color:LC[d.lv]}}>●</span>{c.n}</button>;
          })}
        </div>
      </div>

      {!pan&&<div style={{position:"absolute",bottom:90,left:"50%",transform:"translateX(-50%)",fontSize:9,color:"#1a3050",letterSpacing:2,zIndex:5,pointerEvents:"none"}}>DRAG: Rotate · SCROLL: Zoom · CLICK marker: Details</div>}

      {pan&&sel&&(
        <CinematicPanel sel={sel} layer={layer} sd={sd} od={od} onClose={function(){setPan(false);}} key={sel.id+layer}/>
      )}
    </div>
  );
}

// ═══ TYPEWRITER TEXT ═══
function TypeText(props){
  var text=props.text||"",delay=props.delay||0,speed=props.speed||30,color=props.color||"#c8d0d8",size=props.size||10;
  var [shown,setShown]=useState(0);
  var [started,setStarted]=useState(false);
  useEffect(function(){
    var t1=setTimeout(function(){setStarted(true);},delay);
    return function(){clearTimeout(t1);};
  },[delay]);
  useEffect(function(){
    if(!started)return;
    if(shown>=text.length)return;
    var t=setTimeout(function(){setShown(shown+1);},speed);
    return function(){clearTimeout(t);};
  },[started,shown,text,speed]);
  if(!started)return null;
  return(<span style={{fontSize:size,color:color,lineHeight:1.6}}>
    {text.substring(0,shown)}
    {shown<text.length&&<span style={{animation:"typeBar .5s infinite",borderRight:"2px solid "+color,marginLeft:1}}/>}
  </span>);
}

// ═══ DECODE TEXT (matrix-style reveal) ═══
function DecodeText(props){
  var text=props.text||"",delay=props.delay||0,color=props.color||"#eee",size=props.size||22,weight=props.weight||700;
  var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*<>{}[]|~";
  var [display,setDisplay]=useState("");
  var [started,setStarted]=useState(false);
  var [done,setDone]=useState(false);
  useEffect(function(){
    var t=setTimeout(function(){setStarted(true);},delay);
    return function(){clearTimeout(t);};
  },[delay]);
  useEffect(function(){
    if(!started)return;
    var step=0,maxSteps=text.length*3;
    var iv=setInterval(function(){
      step++;
      var resolved=Math.floor(step/3);
      var result="";
      for(var i=0;i<text.length;i++){
        if(i<resolved)result+=text[i];
        else if(text[i]===" ")result+=" ";
        else result+=chars[Math.floor(Math.random()*chars.length)];
      }
      setDisplay(result);
      if(step>=maxSteps){clearInterval(iv);setDisplay(text);setDone(true);}
    },40);
    return function(){clearInterval(iv);};
  },[started,text]);
  if(!started)return <span style={{fontSize:size,fontWeight:weight,color:"transparent"}}>{text}</span>;
  return(<span style={{fontSize:size,fontWeight:weight,color:done?color:"#0af",transition:"color .3s",letterSpacing:done?0:2,fontFamily:"'Courier New',monospace"}}>{display}</span>);
}

// ═══ ANIMATED BAR ═══
function AnimBar(props){
  var value=props.value||0,max=props.max||4,color=props.color||"#0af",delay=props.delay||0,label=props.label||"",lvLabel=props.lvLabel||"";
  var [w,setW]=useState(0);
  var [num,setNum]=useState(0);
  var [showLabel,setShowLabel]=useState(false);
  useEffect(function(){
    var t=setTimeout(function(){
      setW(value/max*100);
      var steps=20,step=0;
      var iv=setInterval(function(){step++;setNum(Math.round(value*step/steps*10)/10);if(step>=steps){clearInterval(iv);setNum(value);setShowLabel(true);}},30);
      return function(){clearInterval(iv);};
    },delay);
    return function(){clearTimeout(t);};
  },[value,max,delay]);
  return(
    <div style={{marginBottom:8}}>
      <div style={{display:"flex",alignItems:"center",gap:8}}>
        <span style={{fontSize:9,color:"#555",width:24,textAlign:"right"}}>{label}</span>
        <div style={{flex:1,height:8,background:"#0a0e14",borderRadius:4,overflow:"hidden",position:"relative"}}>
          <div style={{width:w+"%",height:"100%",background:"linear-gradient(90deg,"+color+"88,"+color+")",borderRadius:4,transition:"width 0.8s cubic-bezier(.4,0,.2,1)",boxShadow:"0 0 12px "+color+"44"}}/>
          {w>0&&<div style={{position:"absolute",right:0,top:0,bottom:0,width:2,background:color,opacity:.6,animation:"blink 1s infinite"}}/>}
        </div>
        <span style={{fontSize:12,fontWeight:800,color:color,minWidth:20,textAlign:"center",fontFamily:"'Courier New',monospace"}}>{num}</span>
      </div>
      {showLabel&&lvLabel&&<div style={{display:"flex",justifyContent:"flex-end",marginTop:2}}>
        <span style={{fontSize:8,color:color,letterSpacing:1,opacity:.7,animation:"fadeUp .3s ease-out"}}>{lvLabel}</span>
      </div>}
    </div>
  );
}

// ═══ CINEMATIC INFO BLOCK ═══
function CineIB(props){
  var t=props.t,d=props.d,on=props.on,delay=props.delay||0;
  var [visible,setVisible]=useState(false);
  var [phase,setPhase]=useState(0);
  useEffect(function(){
    var t0=setTimeout(function(){setVisible(true);},delay);
    var t1=setTimeout(function(){setPhase(1);},delay+200);
    var t2=setTimeout(function(){setPhase(2);},delay+500);
    var t3=setTimeout(function(){setPhase(3);},delay+800);
    return function(){clearTimeout(t0);clearTimeout(t1);clearTimeout(t2);clearTimeout(t3);};
  },[delay]);
  if(!visible)return <div style={{height:120,opacity:0}}/>;
  var lvColor=LC[d.lv],lvGlow=LG[d.lv];
  return(
    <div style={{padding:14,borderRadius:6,background:on?"rgba(0,170,255,.04)":"rgba(255,255,255,.01)",border:"1px solid "+(on?"rgba(0,170,255,.15)":"rgba(255,255,255,.03)"),animation:"fadeUp .4s ease-out",position:"relative",overflow:"hidden"}}>
      {/* Scan line on appear */}
      {on&&<div className="scan-line"/>}
      {/* Header */}
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10}}>
        <TypeText text={t} delay={delay+100} speed={25} color={on?"#0af":"#444"} size={9}/>
        {phase>=1&&<div style={{animation:"countPulse .4s ease-out"}}>
          <span style={{fontSize:9,padding:"3px 12px",borderRadius:12,background:lvColor+"22",border:"1px solid "+lvColor+"66",color:lvGlow,fontWeight:800,letterSpacing:2,boxShadow:"0 0 15px "+lvColor+"33"}}>LV.{d.lv}</span>
        </div>}
      </div>
      {/* Law name — decode effect */}
      {phase>=1&&<div style={{marginBottom:6}}>
        <DecodeText text={d.law} delay={0} color="#d0d0d0" size={16} weight={700}/>
      </div>}
      {/* Status */}
      {phase>=2&&<div style={{animation:"fadeUp .3s ease-out",marginBottom:8}}>
        <span style={{display:"inline-flex",alignItems:"center",gap:5,fontSize:10,color:"#666",padding:"3px 8px",borderRadius:4,background:"rgba(255,255,255,.02)"}}>
          <span style={{width:6,height:6,borderRadius:"50%",background:lvGlow,boxShadow:"0 0 8px "+lvGlow,animation:"blink 1.5s infinite"}}/>
          <TypeText text={d.st} delay={0} speed={40} color={lvGlow} size={10}/>
        </span>
      </div>}
      {/* Summary */}
      {phase>=3&&<div style={{animation:"fadeUp .3s ease-out",marginBottom:14}}>
        <TypeText text={d.sm} delay={0} speed={20} color="#888" size={10}/>
      </div>}
      {/* Link button */}
      {phase>=3&&<button onClick={function(){if(d.url&&d.url!=="#")window.open(d.url,"_blank");}} style={{
        width:"100%",padding:"10px",borderRadius:4,
        background:on?"rgba(0,170,255,.06)":"rgba(255,255,255,.02)",
        border:"1px solid "+(on?"rgba(0,170,255,.2)":"rgba(255,255,255,.05)"),
        color:on?"#0af":"#555",fontSize:10,letterSpacing:1,
        display:"flex",alignItems:"center",justifyContent:"center",gap:6,
        animation:"fadeUp .3s ease-out",transition:"all .2s"
      }}>⬡ VIEW ORIGINAL LEGISLATION →</button>}
    </div>
  );
}

// ═══ CINEMATIC PANEL ═══
function CinematicPanel(props){
  var sel=props.sel,layer=props.layer,sd=props.sd,od=props.od,onClose=props.onClose;
  var [phase,setPhase]=useState(0);
  var [showScan,setShowScan]=useState(true);
  useEffect(function(){
    var t0=setTimeout(function(){setPhase(1);},300);
    var t1=setTimeout(function(){setPhase(2);},800);
    var t2=setTimeout(function(){setPhase(3);},1400);
    var t3=setTimeout(function(){setPhase(4);},2000);
    var t4=setTimeout(function(){setShowScan(false);},1500);
    return function(){clearTimeout(t0);clearTimeout(t1);clearTimeout(t2);clearTimeout(t3);clearTimeout(t4);};
  },[]);
  return(
    <div style={{position:"absolute",top:50,right:10,bottom:80,width:360,zIndex:20,background:"rgba(2,4,8,.94)",backdropFilter:"blur(16px)",borderRadius:8,border:"1px solid rgba(0,170,255,.2)",animation:"panIn .4s ease-out, borderPulse 2s ease-in-out 3",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"}}>
      {/* Initial scan line */}
      {showScan&&<div className="scan-line"/>}

      {/* Hex scrolling background */}
      <div className="hex-bg" style={{position:"absolute",inset:0,pointerEvents:"none",opacity:.3}}/>

      {/* Close button */}
      <button onClick={onClose} style={{position:"sticky",top:8,marginLeft:"auto",marginRight:8,marginTop:8,width:30,height:30,borderRadius:"50%",background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",color:"#888",fontSize:14,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,flexShrink:0,transition:"all .2s"}}>✕</button>

      <div style={{padding:"0 18px 18px",flex:1,position:"relative",zIndex:2}}>
        {/* ── HEADER SECTION ── */}
        <div style={{marginBottom:4}}>
          <TypeText text="▶ ACCESSING JURISDICTION DATABASE..." delay={0} speed={18} color="#0af" size={8}/>
        </div>

        {/* Country name with glitch */}
        {phase>=1&&<div style={{marginBottom:2}}>
          <div className="glitch-text">
            <DecodeText text={sel.n} delay={0} color="#ffffff" size={26} weight={800}/>
          </div>
        </div>}

        {/* Country code + coordinates with typing */}
        {phase>=1&&<div style={{marginBottom:4,display:"flex",alignItems:"center",gap:8}}>
          <span style={{fontSize:11,color:"#0af",fontWeight:700,padding:"2px 8px",background:"rgba(0,170,255,.1)",borderRadius:3,border:"1px solid rgba(0,170,255,.2)"}}>{sel.id}</span>
          <TypeText text={sel.lat+"°N  "+sel.lng+"°E"} delay={200} speed={35} color="#555" size={9}/>
        </div>}

        {/* Separator with pulse */}
        {phase>=1&&<div style={{height:1,background:"linear-gradient(90deg,transparent,rgba(0,170,255,.3),transparent)",marginBottom:16,marginTop:8}}/>}

        {/* ── THREAT LEVEL OVERVIEW ── */}
        {phase>=2&&<div style={{marginBottom:16,animation:"fadeUp .4s ease-out"}}>
          <div style={{display:"flex",alignItems:"center",gap:6,marginBottom:10}}>
            <span style={{width:4,height:4,borderRadius:"50%",background:"#0af",boxShadow:"0 0 6px #0af"}}/>
            <TypeText text="REGULATION INTENSITY INDEX" delay={0} speed={25} color="#555" size={8}/>
          </div>
          {/* Scale reference */}
          <div style={{display:"flex",justifyContent:"space-between",marginBottom:10,padding:"4px 32px 4px 32px"}}>
            {LL.map(function(lb,i){return <div key={i} style={{display:"flex",flexDirection:"column",alignItems:"center",gap:2}}>
              <span style={{fontSize:7,color:LG[i],fontWeight:i===sel.ai.lv||i===sel.cr.lv?800:400,opacity:i===sel.ai.lv||i===sel.cr.lv?1:.4}}>{i}</span>
              <span style={{fontSize:6,color:LG[i],letterSpacing:.5,opacity:i===sel.ai.lv||i===sel.cr.lv?1:.4}}>{lb}</span>
            </div>;})}
          </div>
          <AnimBar label="AI" value={sel.ai.lv} max={4} color={LG[sel.ai.lv]} delay={200} lvLabel={LL[sel.ai.lv]}/>
          <AnimBar label="VA" value={sel.cr.lv} max={4} color={LG[sel.cr.lv]} delay={400} lvLabel={LL[sel.cr.lv]}/>
          {/* Overall threat assessment */}
          <div style={{marginTop:8,padding:"8px 12px",borderRadius:4,background:"rgba("+((sel.ai.lv+sel.cr.lv)>5?"220,50,50":"0,170,255")+",.06)",border:"1px solid rgba("+((sel.ai.lv+sel.cr.lv)>5?"220,50,50":"0,170,255")+",.12)",textAlign:"center"}}>
            <TypeText text={
              (sel.ai.lv+sel.cr.lv)>=7?"⚠ HIGH REGULATORY ENVIRONMENT":
              (sel.ai.lv+sel.cr.lv)>=4?"◆ MODERATE REGULATORY FRAMEWORK":
              "○ LOW REGULATION ZONE"
            } delay={600} speed={30} color={(sel.ai.lv+sel.cr.lv)>=7?"#ff4444":"#0af"} size={9}/>
          </div>
        </div>}

        {/* ── PRIMARY REGULATION ── */}
        {phase>=2&&<div style={{marginBottom:12}}>
          <div style={{display:"flex",alignItems:"center",gap:6,marginBottom:8}}>
            <span style={{width:4,height:4,borderRadius:"50%",background:"#0f0",boxShadow:"0 0 6px #0f0"}}/>
            <TypeText text="PRIMARY INTEL" delay={0} speed={30} color="#555" size={8}/>
          </div>
          <CineIB t={layer==="ai"?"◆ AI REGULATION":"◈ VIRTUAL ASSET"} d={sd} on={true} delay={100}/>
        </div>}

        {/* ── SECONDARY REGULATION ── */}
        {phase>=3&&<div style={{marginBottom:12}}>
          <div style={{display:"flex",alignItems:"center",gap:6,marginBottom:8}}>
            <span style={{width:4,height:4,borderRadius:"50%",background:"#ff0",boxShadow:"0 0 6px #ff0"}}/>
            <TypeText text="SECONDARY INTEL" delay={0} speed={30} color="#555" size={8}/>
          </div>
          <CineIB t={layer==="ai"?"◈ VIRTUAL ASSET":"◆ AI REGULATION"} d={od} on={false} delay={100}/>
        </div>}

        {/* ── FOOTER ── */}
        {phase>=4&&<div style={{animation:"fadeUp .4s ease-out",textAlign:"center",padding:"8px 0",borderTop:"1px solid rgba(255,255,255,.03)"}}>
          <TypeText text={"DATA CLASSIFICATION: OPEN SOURCE // LAST UPDATE: 2026.02"} delay={0} speed={20} color="#333" size={7}/>
        </div>}
      </div>
    </div>
  );
}

function IB(props){
  var t=props.t,d=props.d,on=props.on;
  return(
    <div style={{padding:12,borderRadius:4,background:on?"rgba(0,170,255,.04)":"rgba(255,255,255,.01)",border:"1px solid "+(on?"rgba(0,170,255,.12)":"rgba(255,255,255,.03)")}}>
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}}>
        <span style={{fontSize:8,letterSpacing:2,color:on?"#0af":"#444"}}>{t}</span>
        <span style={{fontSize:7,padding:"2px 8px",borderRadius:10,background:LC[d.lv]+"33",border:"1px solid "+LC[d.lv]+"66",color:LG[d.lv],fontWeight:700}}>LV.{d.lv}</span>
      </div>
      <div style={{fontSize:14,color:"#d0d0d0",fontWeight:600,marginBottom:3,lineHeight:1.5}}>{d.law}</div>
      <div style={{fontSize:10,color:"#666",marginBottom:6}}><span style={{color:LG[d.lv],marginRight:4}}>●</span>{d.st}</div>
      <div style={{fontSize:10,color:"#555",lineHeight:1.7,marginBottom:12}}>{d.sm}</div>
      <button onClick={function(){if(d.url&&d.url!=="#")window.open(d.url,"_blank");}} style={{width:"100%",padding:"9px",borderRadius:4,background:on?"rgba(0,170,255,.08)":"rgba(255,255,255,.02)",border:"1px solid "+(on?"rgba(0,170,255,.2)":"rgba(255,255,255,.05)"),color:on?"#0af":"#555",fontSize:10,letterSpacing:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6}}>⬡ VIEW ORIGINAL LEGISLATION →</button>
    </div>
  );
}


ReactDOM.render(<App />, document.getElementById("root"));
</script>
</body>
</html>